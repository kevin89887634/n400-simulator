<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N-400 Interview Simulator | å…¥ç±é¢è¯•æ¨¡æ‹Ÿå™¨</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a56db;
            --primary-dark: #1e40af;
            --success: #059669;
            --warning: #d97706;
            --danger: #dc2626;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--gray-800);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 30px 0;
            color: white;
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            opacity: 0.9;
            font-size: 1rem;
        }

        /* Main Card */
        .main-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            overflow: hidden;
        }

        /* Home Screen */
        .home-screen {
            padding: 40px;
        }

        .module-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 24px;
        }

        .module-card {
            background: var(--gray-50);
            border: 2px solid var(--gray-200);
            border-radius: 12px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .module-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .module-card.featured {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
        }

        .module-card h3 {
            font-size: 1.1rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .module-card p {
            font-size: 0.9rem;
            color: var(--gray-500);
        }

        .module-card.featured p {
            color: rgba(255,255,255,0.8);
        }

        .module-card .count {
            font-size: 0.8rem;
            background: var(--gray-200);
            padding: 4px 10px;
            border-radius: 20px;
            margin-top: 12px;
            display: inline-block;
        }

        .module-card.featured .count {
            background: rgba(255,255,255,0.2);
        }

        /* Settings Panel */
        .settings-panel {
            background: var(--gray-50);
            border-radius: 12px;
            padding: 24px;
            margin-top: 24px;
        }

        .settings-panel h3 {
            font-size: 1rem;
            margin-bottom: 16px;
            color: var(--gray-700);
        }

        .setting-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .setting-row:last-child {
            margin-bottom: 0;
        }

        .setting-label {
            font-size: 0.9rem;
            color: var(--gray-600);
        }

        .setting-options {
            display: flex;
            gap: 8px;
        }

        .setting-btn {
            padding: 8px 16px;
            border: 2px solid var(--gray-200);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .setting-btn:hover {
            border-color: var(--primary);
        }

        .setting-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Interview Screen */
        .interview-screen {
            display: none;
        }

        .interview-header {
            background: var(--gray-800);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .interview-header h2 {
            font-size: 1rem;
            font-weight: 500;
        }

        .progress-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .progress-bar {
            width: 150px;
            height: 6px;
            background: var(--gray-600);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--success);
            transition: width 0.3s ease;
        }

        .question-count {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .exit-btn {
            background: transparent;
            border: 1px solid var(--gray-500);
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .exit-btn:hover {
            background: var(--gray-700);
        }

        /* Question Area */
        .question-area {
            padding: 40px;
            text-align: center;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .officer-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 24px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .speaking-indicator {
            position: relative;
        }

        .speaking-indicator.active::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 3px solid var(--primary);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.3); opacity: 0; }
        }

        .question-text {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--gray-800);
            max-width: 600px;
            line-height: 1.4;
            min-height: 60px;
        }

        .question-chinese {
            font-size: 1rem;
            color: var(--gray-500);
            margin-top: 12px;
            display: none;
        }

        .question-chinese.visible {
            display: block;
        }

        .audio-controls {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .audio-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: var(--primary);
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .audio-btn:hover {
            transform: scale(1.1);
            background: var(--primary-dark);
        }

        .audio-btn.secondary {
            background: var(--gray-200);
            color: var(--gray-600);
        }

        .audio-btn.secondary:hover {
            background: var(--gray-300);
        }

        /* Answer Area */
        .answer-area {
            background: var(--gray-50);
            padding: 30px 40px;
            border-top: 1px solid var(--gray-200);
        }

        .answer-input-container {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .answer-input {
            flex: 1;
            padding: 16px 20px;
            border: 2px solid var(--gray-200);
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .answer-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 86, 219, 0.1);
        }

        .mic-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            background: var(--danger);
            color: white;
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mic-btn:hover {
            transform: scale(1.05);
        }

        .mic-btn.listening {
            animation: mic-pulse 1s infinite;
        }

        @keyframes mic-pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.4); }
            50% { box-shadow: 0 0 0 15px rgba(220, 38, 38, 0); }
        }

        .submit-btn {
            padding: 16px 32px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .submit-btn:hover {
            background: var(--primary-dark);
        }

        .submit-btn:disabled {
            background: var(--gray-300);
            cursor: not-allowed;
        }

        /* Feedback Area */
        .feedback-area {
            padding: 30px 40px;
            display: none;
        }

        .feedback-area.visible {
            display: block;
        }

        .feedback-card {
            background: var(--gray-50);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
        }

        .feedback-card.correct {
            background: #ecfdf5;
            border: 1px solid #a7f3d0;
        }

        .feedback-card.incorrect {
            background: #fef2f2;
            border: 1px solid #fecaca;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .feedback-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .feedback-card.correct .feedback-icon {
            background: var(--success);
            color: white;
        }

        .feedback-card.incorrect .feedback-icon {
            background: var(--danger);
            color: white;
        }

        .feedback-title {
            font-weight: 600;
        }

        .reference-answer {
            background: white;
            padding: 16px;
            border-radius: 8px;
            margin-top: 16px;
        }

        .reference-answer h4 {
            font-size: 0.85rem;
            color: var(--gray-500);
            margin-bottom: 8px;
        }

        .reference-answer p {
            color: var(--gray-700);
        }

        .tips-box {
            background: #fffbeb;
            border: 1px solid #fcd34d;
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
        }

        .tips-box h4 {
            font-size: 0.85rem;
            color: var(--warning);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .tips-box p {
            font-size: 0.9rem;
            color: var(--gray-600);
        }

        /* Mastery Buttons */
        .mastery-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .mastery-btn {
            flex: 1;
            padding: 14px;
            border: 2px solid var(--gray-200);
            background: white;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .mastery-btn:hover {
            border-color: var(--primary);
        }

        .mastery-btn .emoji {
            font-size: 1.5rem;
        }

        .mastery-btn.needs-practice:hover {
            border-color: var(--danger);
            background: #fef2f2;
        }

        .mastery-btn.basic:hover {
            border-color: var(--warning);
            background: #fffbeb;
        }

        .mastery-btn.mastered:hover {
            border-color: var(--success);
            background: #ecfdf5;
        }

        /* Progress Screen */
        .progress-screen {
            display: none;
            padding: 40px;
        }

        .progress-title {
            font-size: 1.5rem;
            margin-bottom: 24px;
            text-align: center;
        }

        .progress-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--gray-50);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--gray-500);
            margin-top: 4px;
        }

        .category-progress {
            margin-top: 24px;
        }

        .category-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: var(--gray-50);
            border-radius: 10px;
            margin-bottom: 12px;
        }

        .category-name {
            font-weight: 500;
        }

        .category-bar {
            width: 200px;
            height: 8px;
            background: var(--gray-200);
            border-radius: 4px;
            overflow: hidden;
        }

        .category-fill {
            height: 100%;
            background: var(--success);
            transition: width 0.3s;
        }

        .category-percent {
            font-size: 0.9rem;
            color: var(--gray-500);
            min-width: 50px;
            text-align: right;
        }

        /* Results Screen */
        .results-screen {
            display: none;
            padding: 40px;
            text-align: center;
        }

        .results-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .results-title {
            font-size: 1.8rem;
            margin-bottom: 12px;
        }

        .results-subtitle {
            color: var(--gray-500);
            margin-bottom: 32px;
        }

        .results-stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 32px;
        }

        .result-stat {
            text-align: center;
        }

        .result-stat .number {
            font-size: 2.5rem;
            font-weight: 700;
        }

        .result-stat .label {
            font-size: 0.9rem;
            color: var(--gray-500);
        }

        .result-stat.correct .number {
            color: var(--success);
        }

        .result-stat.incorrect .number {
            color: var(--danger);
        }

        .restart-btn {
            padding: 16px 40px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .restart-btn:hover {
            background: var(--primary-dark);
        }

        /* Vocabulary Screen */
        .vocabulary-screen {
            display: none;
            padding: 40px;
        }

        .vocab-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .vocab-header h2 {
            font-size: 1.5rem;
        }

        .vocab-categories {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 24px;
        }

        .vocab-category-btn {
            padding: 8px 16px;
            border: 2px solid var(--gray-200);
            background: white;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .vocab-category-btn:hover {
            border-color: var(--primary);
        }

        .vocab-category-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .vocab-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .vocab-card {
            background: var(--gray-50);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .vocab-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .vocab-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .vocab-word {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
        }

        .vocab-pronunciation {
            font-size: 0.85rem;
            color: var(--gray-500);
            font-style: italic;
        }

        .vocab-chinese {
            font-size: 1rem;
            color: var(--gray-700);
            margin-bottom: 8px;
        }

        .vocab-definition {
            font-size: 0.9rem;
            color: var(--gray-600);
            line-height: 1.5;
            margin-bottom: 12px;
        }

        .vocab-example {
            background: white;
            padding: 12px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--gray-700);
            border-left: 3px solid var(--primary);
        }

        .vocab-tip {
            margin-top: 12px;
            padding: 10px;
            background: #fffbeb;
            border-radius: 8px;
            font-size: 0.85rem;
            color: var(--warning);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .vocab-audio-btn {
            background: var(--primary);
            color: white;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .vocab-audio-btn:hover {
            transform: scale(1.1);
        }

        .vocab-search {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--gray-200);
            border-radius: 10px;
            font-size: 1rem;
            margin-bottom: 16px;
        }

        .vocab-search:focus {
            outline: none;
            border-color: var(--primary);
        }

        .vocab-count {
            font-size: 0.85rem;
            color: var(--gray-500);
            margin-bottom: 16px;
        }

        /* Voice Select */
        .voice-select {
            padding: 8px 12px;
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            font-size: 0.85rem;
            min-width: 200px;
            cursor: pointer;
            background: white;
        }

        .voice-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Back Button in Interview */
        .nav-buttons {
            display: flex;
            gap: 8px;
        }

        .back-btn {
            background: transparent;
            border: 1px solid var(--gray-500);
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .back-btn:hover {
            background: var(--gray-700);
        }

        .back-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Read All Button */
        .read-all-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
        }

        .read-all-btn:hover {
            background: var(--primary-dark);
        }

        .read-all-btn.playing {
            background: var(--danger);
        }

        /* Mini Audio Button for definitions and examples */
        .mini-audio-btn {
            background: var(--gray-200);
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 0.7rem;
            margin-left: 8px;
            vertical-align: middle;
            transition: all 0.2s;
        }

        .mini-audio-btn:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.1);
        }

        .vocab-definition, .vocab-example {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 8px;
        }

        .vocab-definition span, .vocab-example span {
            flex: 1;
        }

        /* Skip Button */
        .skip-btn {
            padding: 12px 24px;
            background: var(--gray-200);
            color: var(--gray-700);
            border: none;
            border-radius: 12px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .skip-btn:hover {
            background: var(--gray-300);
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray-300);
            transition: 0.3s;
            border-radius: 26px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--primary);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .home-screen {
                padding: 24px;
            }

            .module-grid {
                grid-template-columns: 1fr;
            }

            .question-area {
                padding: 24px;
            }

            .question-text {
                font-size: 1.2rem;
            }

            .answer-area {
                padding: 20px;
            }

            .answer-input-container {
                flex-direction: column;
            }

            .mastery-buttons {
                flex-direction: column;
            }

            .progress-stats {
                grid-template-columns: 1fr;
            }

            .category-item {
                flex-direction: column;
                gap: 12px;
                text-align: center;
            }

            .category-bar {
                width: 100%;
            }
        }

        /* Hidden */
        .hidden {
            display: none !important;
        }

        /* Loading state */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸ‡ºğŸ‡¸ N-400 Interview Simulator</h1>
            <p>å…¥ç±é¢è¯•æ¨¡æ‹Ÿå™¨ - çœŸå®å¯¹è¯ç»ƒä¹ </p>
        </header>

        <main class="main-card">
            <!-- Home Screen -->
            <div class="home-screen" id="homeScreen">
                <h2 style="font-size: 1.3rem; margin-bottom: 8px;">é€‰æ‹©ç»ƒä¹ æ¨¡å— Choose Practice Module</h2>
                <p style="color: var(--gray-500); font-size: 0.9rem;">ç‚¹å‡»å¼€å§‹ç»ƒä¹  Click to start practicing</p>

                <div class="module-grid">
                    <div class="module-card" onclick="startModule('warmup')">
                        <h3>ğŸ‘‹ çƒ­èº«é—®é¢˜ Warm-up</h3>
                        <p>é¢è¯•å¼€åœºç™½ä¸åŸºæœ¬å¯’æš„</p>
                        <span class="count">15 questions</span>
                    </div>
                    <div class="module-card" onclick="startModule('part2')">
                        <h3>ğŸ‘¤ Part 2: ä¸ªäººä¿¡æ¯</h3>
                        <p>å§“åã€ç”Ÿæ—¥ã€åœ°å€ç­‰åŸºæœ¬ä¿¡æ¯</p>
                        <span class="count">20 questions</span>
                    </div>
                    <div class="module-card" onclick="startModule('part3-9')">
                        <h3>ğŸ“‹ Part 3-9: å†å²ä¿¡æ¯</h3>
                        <p>å±…ä½ã€å·¥ä½œã€æ—…è¡Œã€å©šå§»ã€å­å¥³</p>
                        <span class="count">35 questions</span>
                    </div>
                    <div class="module-card" onclick="startModule('part12')">
                        <h3>âš–ï¸ Part 12: é“å¾·å“è´¨</h3>
                        <p>"Have you ever..." æ˜¯éé¢˜</p>
                        <span class="count">45 questions</span>
                    </div>
                    <div class="module-card" onclick="startModule('oath')">
                        <h3>ğŸ–ï¸ æ•ˆå¿ èª“è¯ Oath</h3>
                        <p>å®ªæ³•æ”¯æŒä¸æ•ˆå¿ å®£èª“é—®é¢˜</p>
                        <span class="count">10 questions</span>
                    </div>
                    <div class="module-card featured" onclick="startModule('mock')">
                        <h3>ğŸ¯ å®Œæ•´æ¨¡æ‹Ÿé¢è¯•</h3>
                        <p>éšæœºæŠ½å–25é¢˜ï¼Œå®Œæ•´æ¨¡æ‹ŸçœŸå®é¢è¯•</p>
                        <span class="count">Mock Interview</span>
                    </div>
                    <div class="module-card" onclick="showVocabulary()">
                        <h3>ğŸ“š è¯æ±‡å­¦ä¹  Vocabulary</h3>
                        <p>N-400æ ¸å¿ƒè¯æ±‡ä¸åè¯è§£é‡Š</p>
                        <span class="count">100+ words</span>
                    </div>
                </div>

                <div class="settings-panel">
                    <h3>âš™ï¸ ç»ƒä¹ è®¾ç½® Settings</h3>

                    <div class="setting-row">
                        <span class="setting-label">éš¾åº¦ Difficulty</span>
                        <div class="setting-options">
                            <button class="setting-btn" data-setting="difficulty" data-value="easy">å…¥é—¨ Easy</button>
                            <button class="setting-btn active" data-setting="difficulty" data-value="normal">æ­£å¸¸ Normal</button>
                            <button class="setting-btn" data-setting="difficulty" data-value="hard">æŒ‘æˆ˜ Hard</button>
                        </div>
                    </div>

                    <div class="setting-row">
                        <span class="setting-label">æ˜¾ç¤ºä¸­æ–‡ç¿»è¯‘ Show Chinese</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="showChinese" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="setting-row">
                        <span class="setting-label">è‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€é¢˜ Auto-play Next</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoNext" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="setting-row">
                        <span class="setting-label">éšæœºé—®æ³•å˜åŒ– Random Phrasings</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="randomPhrasing" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="setting-row">
                        <span class="setting-label">è¯­éŸ³é€‰æ‹© Voice</span>
                        <select id="voiceSelect" class="voice-select" onchange="changeVoice()">
                            <option value="">åŠ è½½ä¸­...</option>
                        </select>
                    </div>

                    <div class="setting-row">
                        <span class="setting-label">é¢˜ç›®ç­›é€‰ Filter</span>
                        <div class="setting-options">
                            <button class="setting-btn active" data-setting="filter" data-value="all">å…¨éƒ¨ All</button>
                            <button class="setting-btn" data-setting="filter" data-value="needs-practice">éœ€å¤ä¹ </button>
                            <button class="setting-btn" data-setting="filter" data-value="not-mastered">æœªæŒæ¡</button>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 24px; text-align: center;">
                    <button class="setting-btn" onclick="showProgress()" style="padding: 12px 24px;">
                        ğŸ“Š æŸ¥çœ‹ç»ƒä¹ è¿›åº¦ View Progress
                    </button>
                </div>
            </div>

            <!-- Interview Screen -->
            <div class="interview-screen" id="interviewScreen">
                <div class="interview-header">
                    <h2 id="moduleTitle">Part 2: ä¸ªäººä¿¡æ¯</h2>
                    <div class="progress-info">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                        </div>
                        <span class="question-count" id="questionCount">1 / 20</span>
                    </div>
                    <div class="nav-buttons">
                        <button class="back-btn" id="backBtn" onclick="goBack()" title="ä¸Šä¸€é¢˜">â† ä¸Šä¸€é¢˜</button>
                        <button class="exit-btn" onclick="exitInterview()">âœ• é€€å‡º</button>
                    </div>
                </div>

                <div class="question-area">
                    <div class="officer-avatar speaking-indicator" id="officerAvatar">
                        ğŸ‘®
                    </div>
                    <p class="question-text" id="questionText">Loading...</p>
                    <p class="question-chinese" id="questionChinese">åŠ è½½ä¸­...</p>
                    <div class="audio-controls">
                        <button class="audio-btn" id="playBtn" onclick="playQuestion()" title="æ’­æ”¾ Play">
                            ğŸ”Š
                        </button>
                        <button class="audio-btn secondary" id="repeatBtn" onclick="playQuestion()" title="é‡å¤ Repeat">
                            ğŸ”
                        </button>
                        <button class="audio-btn secondary" id="slowBtn" onclick="playQuestionSlow()" title="æ…¢é€Ÿ Slow">
                            ğŸ¢
                        </button>
                    </div>
                </div>

                <div class="answer-area" id="answerArea">
                    <div class="answer-input-container">
                        <input type="text" class="answer-input" id="answerInput"
                               placeholder="è¾“å…¥ä½ çš„å›ç­” Type your answer..."
                               onkeypress="if(event.key==='Enter') submitAnswer()">
                        <button class="mic-btn" id="micBtn" onclick="toggleMic()" title="è¯­éŸ³è¾“å…¥ Voice Input">
                            ğŸ¤
                        </button>
                        <button class="submit-btn" onclick="submitAnswer()">å›ç­” Answer</button>
                        <button class="skip-btn" onclick="skipQuestion()">ä¸‹ä¸€é¢˜ Next â†’</button>
                    </div>
                </div>

                <div class="feedback-area" id="feedbackArea">
                    <div class="feedback-card" id="feedbackCard">
                        <div class="feedback-header">
                            <div class="feedback-icon" id="feedbackIcon">âœ“</div>
                            <span class="feedback-title" id="feedbackTitle">Good!</span>
                        </div>
                        <div class="reference-answer">
                            <h4>ğŸ“ å‚è€ƒç­”æ¡ˆ Reference Answer:</h4>
                            <p id="referenceAnswer">...</p>
                        </div>
                        <div class="tips-box" id="tipsBox">
                            <h4>ğŸ’¡ å°è´´å£« Tip:</h4>
                            <p id="tipText">...</p>
                        </div>
                    </div>

                    <div class="mastery-buttons">
                        <button class="mastery-btn needs-practice" onclick="markMastery('needs-practice')">
                            <span class="emoji">ğŸ˜Ÿ</span>
                            <span>è¿˜éœ€ç»ƒä¹  Need Practice</span>
                        </button>
                        <button class="mastery-btn basic" onclick="markMastery('basic')">
                            <span class="emoji">ğŸ˜Š</span>
                            <span>åŸºæœ¬æŒæ¡ Understand</span>
                        </button>
                        <button class="mastery-btn mastered" onclick="markMastery('mastered')">
                            <span class="emoji">ğŸ’ª</span>
                            <span>å®Œå…¨æŒæ¡ Mastered</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Progress Screen -->
            <div class="progress-screen" id="progressScreen">
                <h2 class="progress-title">ğŸ“Š ç»ƒä¹ è¿›åº¦ Your Progress</h2>

                <div class="progress-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalPracticed">0</div>
                        <div class="stat-label">å·²ç»ƒä¹  Practiced</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalMastered">0</div>
                        <div class="stat-label">å·²æŒæ¡ Mastered</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalNeedsPractice">0</div>
                        <div class="stat-label">éœ€å¤ä¹  Need Review</div>
                    </div>
                </div>

                <div class="category-progress" id="categoryProgress">
                    <!-- Category items will be generated -->
                </div>

                <div style="text-align: center; margin-top: 24px;">
                    <button class="restart-btn" onclick="showHome()">â† è¿”å›é¦–é¡µ Back Home</button>
                </div>
            </div>

            <!-- Results Screen -->
            <div class="results-screen" id="resultsScreen">
                <div class="results-icon" id="resultsIcon">ğŸ‰</div>
                <h2 class="results-title" id="resultsTitle">ç»ƒä¹ å®Œæˆï¼</h2>
                <p class="results-subtitle" id="resultsSubtitle">Great job completing this session!</p>

                <div class="results-stats">
                    <div class="result-stat correct">
                        <div class="number" id="correctCount">0</div>
                        <div class="label">æ­£ç¡® Correct</div>
                    </div>
                    <div class="result-stat incorrect">
                        <div class="number" id="incorrectCount">0</div>
                        <div class="label">éœ€å¤ä¹  Need Review</div>
                    </div>
                </div>

                <button class="restart-btn" onclick="showHome()">â† è¿”å›é¦–é¡µ Back Home</button>
            </div>

            <!-- Vocabulary Screen -->
            <div class="vocabulary-screen" id="vocabularyScreen">
                <div class="vocab-header">
                    <h2>ğŸ“š è¯æ±‡å­¦ä¹  Vocabulary</h2>
                    <button class="exit-btn" onclick="showHome()" style="background: var(--gray-100); color: var(--gray-700); border: 1px solid var(--gray-300);">
                        â† è¿”å› Back
                    </button>
                </div>

                <input type="text" class="vocab-search" id="vocabSearch"
                       placeholder="ğŸ” æœç´¢è¯æ±‡ Search vocabulary..."
                       oninput="filterVocabulary()">

                <div class="vocab-categories" id="vocabCategories">
                    <button class="vocab-category-btn active" data-category="all" onclick="selectVocabCategory('all')">
                        å…¨éƒ¨ All
                    </button>
                    <button class="vocab-category-btn" data-category="identity" onclick="selectVocabCategory('identity')">
                        èº«ä»½ Identity
                    </button>
                    <button class="vocab-category-btn" data-category="residence" onclick="selectVocabCategory('residence')">
                        å±…ä½ Residence
                    </button>
                    <button class="vocab-category-btn" data-category="family" onclick="selectVocabCategory('family')">
                        å®¶åº­ Family
                    </button>
                    <button class="vocab-category-btn" data-category="employment" onclick="selectVocabCategory('employment')">
                        å·¥ä½œ Work
                    </button>
                    <button class="vocab-category-btn" data-category="immigration" onclick="selectVocabCategory('immigration')">
                        ç§»æ°‘ Immigration
                    </button>
                    <button class="vocab-category-btn" data-category="legal" onclick="selectVocabCategory('legal')">
                        æ³•å¾‹ Legal
                    </button>
                    <button class="vocab-category-btn" data-category="moralCharacter" onclick="selectVocabCategory('moralCharacter')">
                        é“å¾· Moral
                    </button>
                    <button class="vocab-category-btn" data-category="military" onclick="selectVocabCategory('military')">
                        å†›äº‹ Military
                    </button>
                    <button class="vocab-category-btn" data-category="oath" onclick="selectVocabCategory('oath')">
                        èª“è¯ Oath
                    </button>
                    <button class="vocab-category-btn" data-category="verbs" onclick="selectVocabCategory('verbs')">
                        åŠ¨è¯ Verbs
                    </button>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <div class="vocab-count" id="vocabCount">æ˜¾ç¤º 100 ä¸ªè¯æ±‡</div>
                    <button class="read-all-btn" id="readAllBtn" onclick="toggleReadAll()">
                        ğŸ”Š <span id="readAllText">æœ—è¯»å…¨éƒ¨</span>
                    </button>
                </div>

                <div class="vocab-list" id="vocabList">
                    <!-- Vocabulary cards will be generated here -->
                </div>
            </div>
        </main>

        <footer style="text-align: center; padding: 20px; color: rgba(255,255,255,0.7); font-size: 0.85rem;">
            <p>ç¥ä½ é¢è¯•é¡ºåˆ©ï¼Good luck with your interview! ğŸ€</p>
        </footer>
    </div>

    <script>
// N-400 Interview Questions Database
// æ¯é“é¢˜åŒ…å«å¤šç§é—®æ³•å˜ä½“ï¼Œæ¨¡æ‹ŸçœŸå®ç§»æ°‘å®˜çš„ä¸åŒè¯´è¯æ–¹å¼

const questionDatabase = {
    // çƒ­èº«é—®é¢˜
    warmup: [
        {
            id: "w1",
            category: "warmup",
            phrasings: [
                { text: "How are you today?", style: "formal" },
                { text: "How are you?", style: "normal" },
                { text: "How you doing?", style: "casual" }
            ],
            chinese: "ä½ ä»Šå¤©å¥½å—ï¼Ÿ",
            answers: ["I am fine, thank you.", "Good, thank you.", "I'm doing well, thanks."],
            tip: "ä¿æŒç¤¼è²Œå’Œè‡ªä¿¡ï¼Œç®€çŸ­å›ç­”å³å¯ã€‚"
        },
        {
            id: "w2",
            category: "warmup",
            phrasings: [
                { text: "Please follow me.", style: "formal" },
                { text: "Follow me, please.", style: "normal" },
                { text: "Come with me.", style: "casual" }
            ],
            chinese: "è¯·è·Ÿæˆ‘æ¥ã€‚",
            answers: ["(Follow the officer)", "Okay.", "Sure."],
            tip: "è¿™æ˜¯æŒ‡ä»¤ï¼Œä¸éœ€è¦å›ç­”ï¼Œè·Ÿç€èµ°å°±å¯ä»¥ã€‚"
        },
        {
            id: "w3",
            category: "warmup",
            phrasings: [
                { text: "Please raise your right hand.", style: "formal" },
                { text: "Raise your right hand.", style: "normal" },
                { text: "Right hand up.", style: "casual" }
            ],
            chinese: "è¯·ä¸¾èµ·ä½ çš„å³æ‰‹ã€‚",
            answers: ["(Raise your right hand)"],
            tip: "è¿™æ˜¯å®£èª“å‰çš„æŒ‡ä»¤ï¼Œä¸¾èµ·å³æ‰‹å‡†å¤‡å®£èª“ã€‚"
        },
        {
            id: "w4",
            category: "warmup",
            phrasings: [
                { text: "Do you swear that all your statements are true?", style: "formal" },
                { text: "Do you swear to tell the truth?", style: "normal" },
                { text: "You swear everything is true?", style: "casual" }
            ],
            chinese: "ä½ å®£èª“ä½ çš„é™ˆè¿°éƒ½æ˜¯çœŸå®çš„å—ï¼Ÿ",
            answers: ["Yes, I do.", "Yes.", "I do."],
            tip: "swear = å®£èª“ï¼Œå›ç­” Yes æˆ– I doã€‚"
        },
        {
            id: "w5",
            category: "warmup",
            phrasings: [
                { text: "Please have a seat.", style: "formal" },
                { text: "Sit down, please.", style: "normal" },
                { text: "Have a seat.", style: "casual" }
            ],
            chinese: "è¯·åã€‚",
            answers: ["Thank you.", "Thanks."],
            tip: "ç¤¼è²Œåœ°è¯´å£°è°¢è°¢ç„¶ååä¸‹ã€‚"
        },
        {
            id: "w6",
            category: "warmup",
            phrasings: [
                { text: "May I see your green card and ID?", style: "formal" },
                { text: "Can I see your green card?", style: "normal" },
                { text: "Green card and ID?", style: "casual" }
            ],
            chinese: "æˆ‘å¯ä»¥çœ‹çœ‹ä½ çš„ç»¿å¡å’Œèº«ä»½è¯å—ï¼Ÿ",
            answers: ["Here you go.", "Sure, here it is.", "Yes, here."],
            tip: "æŠŠè¯ä»¶é€’ç»™ç§»æ°‘å®˜ã€‚"
        },
        {
            id: "w7",
            category: "warmup",
            phrasings: [
                { text: "Why are you here today?", style: "formal" },
                { text: "Why did you come today?", style: "normal" },
                { text: "What brings you here?", style: "casual" }
            ],
            chinese: "ä½ ä»Šå¤©ä¸ºä»€ä¹ˆæ¥è¿™é‡Œï¼Ÿ",
            answers: ["For my citizenship interview.", "Citizen interview.", "Naturalization interview."],
            tip: "citizenship interview = å…¬æ°‘é¢è¯•"
        },
        {
            id: "w8",
            category: "warmup",
            phrasings: [
                { text: "Why do you want to become a U.S. citizen?", style: "formal" },
                { text: "Why do you want to be a citizen?", style: "normal" },
                { text: "Why citizenship?", style: "casual" }
            ],
            chinese: "ä½ ä¸ºä»€ä¹ˆè¦æˆä¸ºç¾å›½å…¬æ°‘ï¼Ÿ",
            answers: ["I want to vote.", "For freedom.", "To vote and have more rights.", "I love this country."],
            tip: "å¸¸è§å›ç­”ï¼švoteï¼ˆæŠ•ç¥¨ï¼‰ã€freedomï¼ˆè‡ªç”±ï¼‰ã€rightsï¼ˆæƒåˆ©ï¼‰"
        },
        {
            id: "w9",
            category: "warmup",
            phrasings: [
                { text: "How did you get here today?", style: "formal" },
                { text: "How did you come here?", style: "normal" },
                { text: "How'd you get here?", style: "casual" }
            ],
            chinese: "ä½ ä»Šå¤©æ€ä¹ˆæ¥çš„ï¼Ÿ",
            answers: ["I drove here.", "By car.", "My spouse drove me.", "I took an Uber."],
            tip: "è¿™æ˜¯é—®ä½ çš„äº¤é€šæ–¹å¼ï¼Œä¸æ˜¯é—®ä½ æ€ä¹ˆæ¥ç¾å›½çš„ã€‚"
        },
        {
            id: "w10",
            category: "warmup",
            phrasings: [
                { text: "Are you ready for your interview?", style: "formal" },
                { text: "Are you ready?", style: "normal" },
                { text: "Ready?", style: "casual" }
            ],
            chinese: "ä½ å‡†å¤‡å¥½é¢è¯•äº†å—ï¼Ÿ",
            answers: ["Yes, I am.", "Yes.", "I'm ready."],
            tip: "è‡ªä¿¡åœ°å›ç­” Yes!"
        },
        {
            id: "w11",
            category: "warmup",
            phrasings: [
                { text: "Is your application current and up-to-date?", style: "formal" },
                { text: "Is everything on your application still correct?", style: "normal" },
                { text: "Anything changed on your application?", style: "casual" }
            ],
            chinese: "ä½ çš„ç”³è¯·è¡¨å†…å®¹éƒ½æ˜¯æœ€æ–°çš„å—ï¼Ÿ",
            answers: ["Yes, it is.", "Yes.", "Everything is current."],
            tip: "å¦‚æœæœ‰å˜åŒ–è¦è¯´ No, I have some changes."
        },
        {
            id: "w12",
            category: "warmup",
            phrasings: [
                { text: "Do you have any changes, additions, or corrections to make?", style: "formal" },
                { text: "Any changes to your application?", style: "normal" },
                { text: "Anything to update?", style: "casual" }
            ],
            chinese: "ä½ æœ‰ä»»ä½•æ”¹å˜ã€æ·»åŠ æˆ–æ›´æ­£å—ï¼Ÿ",
            answers: ["No, I don't.", "No.", "No changes."],
            tip: "å¦‚æœæœ‰å˜åŒ–ï¼Œè¦å¦‚å®è¯´æ˜ã€‚"
        },
        {
            id: "w13",
            category: "warmup",
            phrasings: [
                { text: "Do you understand me?", style: "formal" },
                { text: "Do you understand?", style: "normal" },
                { text: "Understand?", style: "casual" }
            ],
            chinese: "ä½ æ˜ç™½å—ï¼Ÿ",
            answers: ["Yes, I understand.", "Yes.", "I do."],
            tip: "å¦‚æœæ²¡å¬æ‡‚ï¼Œå¯ä»¥è¯´ Can you repeat that, please?"
        },
        {
            id: "w14",
            category: "warmup",
            phrasings: [
                { text: "How long have you been studying for this interview?", style: "formal" },
                { text: "How long did you study?", style: "normal" },
                { text: "How long you study?", style: "casual" }
            ],
            chinese: "ä½ å­¦ä¹ äº†å¤šä¹…ï¼Ÿ",
            answers: ["About six months.", "A few months.", "A long time."],
            tip: "ç®€å•å›ç­”å­¦ä¹ çš„æ—¶é•¿å³å¯ã€‚"
        },
        {
            id: "w15",
            category: "warmup",
            phrasings: [
                { text: "Is this your first interview?", style: "formal" },
                { text: "First time interviewing?", style: "normal" },
                { text: "First interview?", style: "casual" }
            ],
            chinese: "è¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡é¢è¯•å—ï¼Ÿ",
            answers: ["Yes, this is my first interview.", "No, this is my second interview."],
            tip: "å¦‚å®å›ç­”ã€‚å¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡ï¼Œå¯èƒ½ä¼šé—®ä¸Šæ¬¡ä¸ºä»€ä¹ˆæ²¡é€šè¿‡ã€‚"
        }
    ],

    // Part 2: ä¸ªäººåŸºæœ¬ä¿¡æ¯
    part2: [
        {
            id: "p2-1",
            category: "part2",
            phrasings: [
                { text: "What is your full legal name?", style: "formal" },
                { text: "Please state your full name.", style: "normal" },
                { text: "Your name?", style: "casual" },
                { text: "Full name?", style: "casual" }
            ],
            chinese: "ä½ çš„æ³•å®šå…¨åæ˜¯ä»€ä¹ˆï¼Ÿ",
            answers: ["My name is [Your Full Name].", "My full legal name is [Your Full Name]."],
            tip: "æŒ‰ç…§ç»¿å¡ä¸Šçš„é¡ºåºè¯´ï¼šFirst Name, Last Name"
        },
        {
            id: "p2-2",
            category: "part2",
            phrasings: [
                { text: "How do you spell your name?", style: "formal" },
                { text: "Can you spell your name?", style: "normal" },
                { text: "Spell your name.", style: "casual" }
            ],
            chinese: "ä½ çš„åå­—æ€ä¹ˆæ‹¼å†™ï¼Ÿ",
            answers: ["Z-H-I-M-E-N-G F-A-N"],
            tip: "ä¸€ä¸ªå­—æ¯ä¸€ä¸ªå­—æ¯åœ°æ‹¼å‡ºæ¥ã€‚"
        },
        {
            id: "p2-3",
            category: "part2",
            phrasings: [
                { text: "Have you used any other names since birth?", style: "formal" },
                { text: "Any other names?", style: "normal" },
                { text: "Other names?", style: "casual" }
            ],
            chinese: "ä½ ä»å‡ºç”Ÿä»¥æ¥ç”¨è¿‡å…¶ä»–åå­—å—ï¼Ÿ",
            answers: ["No, I have not.", "No.", "Yes, my nickname is [Name]."],
            tip: "åŒ…æ‹¬æ˜µç§°ã€å©šå‰å§“ç­‰ã€‚"
        },
        {
            id: "p2-4",
            category: "part2",
            phrasings: [
                { text: "Do you have a middle name?", style: "formal" },
                { text: "Middle name?", style: "normal" },
                { text: "Any middle name?", style: "casual" }
            ],
            chinese: "ä½ æœ‰ä¸­é—´åå—ï¼Ÿ",
            answers: ["No, I don't have a middle name.", "No.", "Yes, my middle name is [Name]."],
            tip: "ä¸­å›½äººé€šå¸¸æ²¡æœ‰ä¸­é—´åï¼Œå›ç­” Noã€‚"
        },
        {
            id: "p2-5",
            category: "part2",
            phrasings: [
                { text: "Do you want to legally change your name?", style: "formal" },
                { text: "Want to change your name?", style: "normal" },
                { text: "Changing your name?", style: "casual" }
            ],
            chinese: "ä½ æƒ³åˆæ³•æ›´æ”¹ä½ çš„åå­—å—ï¼Ÿ",
            answers: ["No, I don't.", "Yes, I want to change my first name to Kevin."],
            tip: "å¦‚æœæƒ³æ”¹åå­—ï¼Œè¦åœ¨å…¥ç±æ—¶è¯´æ˜ã€‚"
        },
        {
            id: "p2-6",
            category: "part2",
            phrasings: [
                { text: "What is your A-Number?", style: "formal" },
                { text: "What's your Alien number?", style: "normal" },
                { text: "A-Number?", style: "casual" }
            ],
            chinese: "ä½ çš„Aå·ç æ˜¯ä»€ä¹ˆï¼Ÿ",
            answers: ["My A-Number is 215571545."],
            tip: "A-Number åœ¨ç»¿å¡ä¸Šï¼Œä»¥ A- å¼€å¤´çš„9ä½æ•°å­—ã€‚"
        },
        {
            id: "p2-7",
            category: "part2",
            phrasings: [
                { text: "What is your date of birth?", style: "formal" },
                { text: "When were you born?", style: "normal" },
                { text: "Birthday?", style: "casual" },
                { text: "Date of birth?", style: "casual" }
            ],
            chinese: "ä½ çš„å‡ºç”Ÿæ—¥æœŸæ˜¯ä»€ä¹ˆï¼Ÿ",
            answers: ["October twenty-fifth, nineteen eighty-one.", "October 25, 1981."],
            tip: "ç”¨è‹±æ–‡è¯´æ—¥æœŸï¼šæœˆ/æ—¥/å¹´ã€‚é¿å…åªè¯´æ•°å­—ã€‚"
        },
        {
            id: "p2-8",
            category: "part2",
            phrasings: [
                { text: "How old are you?", style: "formal" },
                { text: "What is your age?", style: "normal" },
                { text: "Your age?", style: "casual" }
            ],
            chinese: "ä½ å¤šå¤§äº†ï¼Ÿ",
            answers: ["I am [XX] years old."],
            tip: "è¯´ä½ ç°åœ¨çš„å¹´é¾„ã€‚"
        },
        {
            id: "p2-9",
            category: "part2",
            phrasings: [
                { text: "Where were you born?", style: "formal" },
                { text: "What country were you born in?", style: "normal" },
                { text: "Country of birth?", style: "casual" }
            ],
            chinese: "ä½ åœ¨å“ªé‡Œå‡ºç”Ÿï¼Ÿ",
            answers: ["I was born in China.", "China."],
            tip: "è¯´å›½å®¶åç§°å³å¯ã€‚"
        },
        {
            id: "p2-10",
            category: "part2",
            phrasings: [
                { text: "What is your nationality?", style: "formal" },
                { text: "What country are you from?", style: "normal" },
                { text: "Nationality?", style: "casual" }
            ],
            chinese: "ä½ çš„å›½ç±æ˜¯ä»€ä¹ˆï¼Ÿ",
            answers: ["China.", "Chinese.", "I am from China."],
            tip: "nationality = å›½ç±"
        },
        {
            id: "p2-11",
            category: "part2",
            phrasings: [
                { text: "When did you become a permanent resident?", style: "formal" },
                { text: "When did you get your green card?", style: "normal" },
                { text: "Green card date?", style: "casual" }
            ],
            chinese: "ä½ ä»€ä¹ˆæ—¶å€™æˆä¸ºæ°¸ä¹…å±…æ°‘çš„ï¼Ÿ",
            answers: ["April twenty-seventh, twenty twenty.", "April 27, 2020."],
            tip: "çœ‹ç»¿å¡ä¸Šçš„æ—¥æœŸã€‚"
        },
        {
            id: "p2-12",
            category: "part2",
            phrasings: [
                { text: "What is your current physical address?", style: "formal" },
                { text: "Where do you live?", style: "normal" },
                { text: "Home address?", style: "casual" },
                { text: "Address?", style: "casual" }
            ],
            chinese: "ä½ ç°åœ¨ä½åœ¨å“ªé‡Œï¼Ÿ",
            answers: ["20751 E Rim Lane, Walnut, California, 91789."],
            tip: "å®Œæ•´åœ°å€ï¼šé—¨ç‰Œå·+è¡—å+åŸå¸‚+å·+é‚®ç¼–"
        },
        {
            id: "p2-13",
            category: "part2",
            phrasings: [
                { text: "How long have you lived at this address?", style: "formal" },
                { text: "How long have you lived there?", style: "normal" },
                { text: "How long at this address?", style: "casual" }
            ],
            chinese: "ä½ åœ¨è¿™ä¸ªåœ°å€ä½äº†å¤šä¹…ï¼Ÿ",
            answers: ["Since February 2021.", "About [X] years."],
            tip: "è®¡ç®—ä»æ¬å…¥æ—¥æœŸåˆ°ç°åœ¨ã€‚"
        },
        {
            id: "p2-14",
            category: "part2",
            phrasings: [
                { text: "Where else have you lived in the last 5 years?", style: "formal" },
                { text: "Any other addresses in the past 5 years?", style: "normal" },
                { text: "Previous address?", style: "casual" }
            ],
            chinese: "è¿‡å»5å¹´ä½ è¿˜ä½è¿‡å“ªé‡Œï¼Ÿ",
            answers: ["1427 Fairlance Drive, Walnut, California."],
            tip: "åˆ—å‡ºè¿‡å»5å¹´å†…ä½è¿‡çš„å…¶ä»–åœ°å€ã€‚"
        },
        {
            id: "p2-15",
            category: "part2",
            phrasings: [
                { text: "Are you Hispanic or Latino?", style: "formal" },
                { text: "Hispanic or Latino?", style: "normal" },
                { text: "Ethnicity?", style: "casual" }
            ],
            chinese: "ä½ æ˜¯è¥¿ç­ç‰™è£”æˆ–æ‹‰ä¸è£”å—ï¼Ÿ",
            answers: ["No, I am not Hispanic or Latino."],
            tip: "Ethnicity = æ—è£”ã€‚ä¸­å›½äººå›ç­” Noã€‚"
        },
        {
            id: "p2-16",
            category: "part2",
            phrasings: [
                { text: "What is your race?", style: "formal" },
                { text: "Race?", style: "normal" }
            ],
            chinese: "ä½ çš„ç§æ—æ˜¯ä»€ä¹ˆï¼Ÿ",
            answers: ["Asian.", "I am Asian."],
            tip: "Race = ç§æ—ã€‚ä¸­å›½äººé€‰ Asianã€‚"
        },
        {
            id: "p2-17",
            category: "part2",
            phrasings: [
                { text: "How tall are you?", style: "formal" },
                { text: "What is your height?", style: "normal" },
                { text: "Height?", style: "casual" }
            ],
            chinese: "ä½ å¤šé«˜ï¼Ÿ",
            answers: ["Five feet seven inches.", "Five seven."],
            tip: "ç¾å›½ç”¨è‹±å°ºå’Œè‹±å¯¸ã€‚5'7\" = 5 feet 7 inches"
        },
        {
            id: "p2-18",
            category: "part2",
            phrasings: [
                { text: "How much do you weigh?", style: "formal" },
                { text: "What is your weight?", style: "normal" },
                { text: "Weight?", style: "casual" }
            ],
            chinese: "ä½ ä½“é‡å¤šå°‘ï¼Ÿ",
            answers: ["One hundred seventy-eight pounds.", "178 pounds."],
            tip: "ç¾å›½ç”¨ç£…(pounds/lbs)ã€‚"
        },
        {
            id: "p2-19",
            category: "part2",
            phrasings: [
                { text: "What is your phone number?", style: "formal" },
                { text: "Phone number?", style: "normal" }
            ],
            chinese: "ä½ çš„ç”µè¯å·ç æ˜¯ä»€ä¹ˆï¼Ÿ",
            answers: ["626-606-3969."],
            tip: "åˆ†ç»„å¿µæ•°å­—ã€‚"
        },
        {
            id: "p2-20",
            category: "part2",
            phrasings: [
                { text: "What is your email address?", style: "formal" },
                { text: "Email?", style: "casual" }
            ],
            chinese: "ä½ çš„ç”µå­é‚®ç®±æ˜¯ä»€ä¹ˆï¼Ÿ",
            answers: ["zmfpower at gmail dot com."],
            tip: "@ è¯»ä½œ atï¼Œ. è¯»ä½œ dot"
        }
    ],

    // Part 3-9: å†å²ä¿¡æ¯ï¼ˆå±…ä½ã€å·¥ä½œã€æ—…è¡Œã€å©šå§»ã€å­å¥³ç­‰ï¼‰
    "part3-9": [
        {
            id: "p3-1",
            category: "part3-9",
            phrasings: [
                { text: "Is your mother a U.S. citizen?", style: "formal" },
                { text: "Is your mom a citizen?", style: "normal" },
                { text: "Mother citizen?", style: "casual" }
            ],
            chinese: "ä½ æ¯äº²æ˜¯ç¾å›½å…¬æ°‘å—ï¼Ÿ",
            answers: ["No, she is not.", "No."],
            tip: "å¦‚æœçˆ¶æ¯æ˜¯ç¾å›½å…¬æ°‘ï¼Œä½ å¯èƒ½å·²ç»æ˜¯å…¬æ°‘äº†ã€‚"
        },
        {
            id: "p3-2",
            category: "part3-9",
            phrasings: [
                { text: "Is your father a U.S. citizen?", style: "formal" },
                { text: "Is your dad a citizen?", style: "normal" },
                { text: "Father citizen?", style: "casual" }
            ],
            chinese: "ä½ çˆ¶äº²æ˜¯ç¾å›½å…¬æ°‘å—ï¼Ÿ",
            answers: ["No, he is not.", "No."],
            tip: "å¦‚å®å›ç­”ã€‚"
        },
        {
            id: "p3-3",
            category: "part3-9",
            phrasings: [
                { text: "What is your current occupation?", style: "formal" },
                { text: "What do you do for work?", style: "normal" },
                { text: "What's your job?", style: "casual" },
                { text: "Occupation?", style: "casual" }
            ],
            chinese: "ä½ ç°åœ¨çš„èŒä¸šæ˜¯ä»€ä¹ˆï¼Ÿ",
            answers: ["I am a Life Insurance Broker.", "Life Insurance Broker."],
            tip: "è¯´ä½ çš„èŒä½åç§°ã€‚"
        },
        {
            id: "p3-4",
            category: "part3-9",
            phrasings: [
                { text: "Where do you work?", style: "formal" },
                { text: "What company do you work for?", style: "normal" },
                { text: "Employer?", style: "casual" }
            ],
            chinese: "ä½ åœ¨å“ªé‡Œå·¥ä½œï¼Ÿ",
            answers: ["Premier Financial Alliance.", "I work at Premier Financial Alliance."],
            tip: "è¯´å…¬å¸åç§°ã€‚"
        },
        {
            id: "p3-5",
            category: "part3-9",
            phrasings: [
                { text: "When did you start working there?", style: "formal" },
                { text: "How long have you worked there?", style: "normal" },
                { text: "Start date?", style: "casual" }
            ],
            chinese: "ä½ ä»€ä¹ˆæ—¶å€™å¼€å§‹åœ¨é‚£é‡Œå·¥ä½œçš„ï¼Ÿ",
            answers: ["July 2022.", "Since July fifth, twenty twenty-two."],
            tip: "æä¾›å¼€å§‹å·¥ä½œçš„æ—¥æœŸã€‚"
        },
        {
            id: "p3-6",
            category: "part3-9",
            phrasings: [
                { text: "What did you do before this job?", style: "formal" },
                { text: "Previous job?", style: "normal" },
                { text: "Job before this?", style: "casual" }
            ],
            chinese: "è¿™ä»½å·¥ä½œä¹‹å‰ä½ åšä»€ä¹ˆï¼Ÿ",
            answers: ["I worked at Crest Synergy Inc in Bothell, Washington.", "Wholesale and retail."],
            tip: "è¯´ä¹‹å‰çš„å·¥ä½œå’Œå…¬å¸ã€‚"
        },
        {
            id: "p3-7",
            category: "part3-9",
            phrasings: [
                { text: "What is your current marital status?", style: "formal" },
                { text: "Are you married?", style: "normal" },
                { text: "Marital status?", style: "casual" },
                { text: "Married?", style: "casual" }
            ],
            chinese: "ä½ ç›®å‰çš„å©šå§»çŠ¶å†µæ˜¯ä»€ä¹ˆï¼Ÿ",
            answers: ["I am married.", "Married."],
            tip: "Singleå•èº«/Marriedå·²å©š/Divorcedç¦»å©š/Widowedä¸§å¶"
        },
        {
            id: "p3-8",
            category: "part3-9",
            phrasings: [
                { text: "How many times have you been married?", style: "formal" },
                { text: "How many marriages?", style: "normal" },
                { text: "Times married?", style: "casual" }
            ],
            chinese: "ä½ ç»“è¿‡å‡ æ¬¡å©šï¼Ÿ",
            answers: ["One time.", "Once.", "This is my first marriage."],
            tip: "Once=ä¸€æ¬¡, Twice=ä¸¤æ¬¡"
        },
        {
            id: "p3-9",
            category: "part3-9",
            phrasings: [
                { text: "When did you get married?", style: "formal" },
                { text: "What is your wedding date?", style: "normal" },
                { text: "Marriage date?", style: "casual" }
            ],
            chinese: "ä½ ä»€ä¹ˆæ—¶å€™ç»“å©šçš„ï¼Ÿ",
            answers: ["July fourth, twenty fourteen.", "July 4, 2014."],
            tip: "è®°ä½ä½ çš„ç»“å©šæ—¥æœŸã€‚"
        },
        {
            id: "p3-10",
            category: "part3-9",
            phrasings: [
                { text: "What is your spouse's full name?", style: "formal" },
                { text: "What is your husband's/wife's name?", style: "normal" },
                { text: "Spouse's name?", style: "casual" }
            ],
            chinese: "ä½ é…å¶çš„å…¨åæ˜¯ä»€ä¹ˆï¼Ÿ",
            answers: ["[Spouse's Full Name]."],
            tip: "spouse = é…å¶ï¼ˆä¸ˆå¤«æˆ–å¦»å­ï¼‰"
        },
        {
            id: "p3-11",
            category: "part3-9",
            phrasings: [
                { text: "Is your spouse a U.S. citizen?", style: "formal" },
                { text: "Is your husband/wife a citizen?", style: "normal" },
                { text: "Spouse citizen?", style: "casual" }
            ],
            chinese: "ä½ çš„é…å¶æ˜¯ç¾å›½å…¬æ°‘å—ï¼Ÿ",
            answers: ["Yes, she/he is.", "Yes.", "No, she/he is a permanent resident."],
            tip: "å¦‚å®å›ç­”ã€‚"
        },
        {
            id: "p3-12",
            category: "part3-9",
            phrasings: [
                { text: "Is your spouse a member of the U.S. armed forces?", style: "formal" },
                { text: "Is your spouse in the military?", style: "normal" },
                { text: "Spouse military?", style: "casual" }
            ],
            chinese: "ä½ çš„é…å¶æ˜¯ç¾å›½å†›é˜Ÿæˆå‘˜å—ï¼Ÿ",
            answers: ["No.", "No, she/he is not."],
            tip: "armed forces = å†›é˜Ÿ"
        },
        {
            id: "p3-13",
            category: "part3-9",
            phrasings: [
                { text: "Do you have any children?", style: "formal" },
                { text: "How many children do you have?", style: "normal" },
                { text: "Any kids?", style: "casual" },
                { text: "Children?", style: "casual" }
            ],
            chinese: "ä½ æœ‰å­©å­å—ï¼Ÿ",
            answers: ["Yes, I have two children.", "Two children."],
            tip: "children = kids = å­©å­"
        },
        {
            id: "p3-14",
            category: "part3-9",
            phrasings: [
                { text: "What are your children's names?", style: "formal" },
                { text: "Children's names?", style: "normal" }
            ],
            chinese: "ä½ å­©å­çš„åå­—æ˜¯ä»€ä¹ˆï¼Ÿ",
            answers: ["Xingchuan Fan and Yining Fan."],
            tip: "è¯´å‡ºæ‰€æœ‰å­©å­çš„åå­—ã€‚"
        },
        {
            id: "p3-15",
            category: "part3-9",
            phrasings: [
                { text: "What are your children's dates of birth?", style: "formal" },
                { text: "When were your children born?", style: "normal" },
                { text: "Children's birthdays?", style: "casual" }
            ],
            chinese: "ä½ å­©å­çš„å‡ºç”Ÿæ—¥æœŸæ˜¯ä»€ä¹ˆï¼Ÿ",
            answers: ["July twenty-fourth, twenty eleven and June twelfth, twenty oh-nine."],
            tip: "è®°ä½æ¯ä¸ªå­©å­çš„ç”Ÿæ—¥ã€‚"
        },
        {
            id: "p3-16",
            category: "part3-9",
            phrasings: [
                { text: "Are they your biological children?", style: "formal" },
                { text: "Are they your natural children?", style: "normal" },
                { text: "Biological?", style: "casual" }
            ],
            chinese: "ä»–ä»¬æ˜¯ä½ çš„äº²ç”Ÿå­©å­å—ï¼Ÿ",
            answers: ["Yes, they are my biological children.", "Yes."],
            tip: "biological = äº²ç”Ÿçš„"
        },
        {
            id: "p3-17",
            category: "part3-9",
            phrasings: [
                { text: "Do your children live with you?", style: "formal" },
                { text: "Where do your children live?", style: "normal" },
                { text: "Kids live with you?", style: "casual" }
            ],
            chinese: "ä½ çš„å­©å­å’Œä½ ä½ä¸€èµ·å—ï¼Ÿ",
            answers: ["Yes, they live with me.", "Yes."],
            tip: "å¦‚å®å›ç­”ã€‚"
        },
        {
            id: "p3-18",
            category: "part3-9",
            phrasings: [
                { text: "Do you provide support for your children?", style: "formal" },
                { text: "Do you support your children?", style: "normal" },
                { text: "Support them?", style: "casual" }
            ],
            chinese: "ä½ æŠšå…»ä½ çš„å­©å­å—ï¼Ÿ",
            answers: ["Yes, I do.", "Yes."],
            tip: "support = ç»æµä¸Šæ”¯æŒ/æŠšå…»"
        },
        {
            id: "p3-19",
            category: "part3-9",
            phrasings: [
                { text: "How did you get your U.S. permanent resident card?", style: "formal" },
                { text: "How did you get your green card?", style: "normal" },
                { text: "How'd you get your green card?", style: "casual" }
            ],
            chinese: "ä½ æ˜¯æ€ä¹ˆè·å¾—ç»¿å¡çš„ï¼Ÿ",
            answers: ["By asylum.", "Through political asylum."],
            tip: "asylum = åº‡æŠ¤ï¼ˆè¯»éŸ³ï¼šé¥¿å¡å†·ï¼‰"
        },
        {
            id: "p3-20",
            category: "part3-9",
            phrasings: [
                { text: "What kind of asylum?", style: "formal" },
                { text: "What type of asylum?", style: "normal" },
                { text: "Asylum type?", style: "casual" }
            ],
            chinese: "ä»€ä¹ˆç±»å‹çš„åº‡æŠ¤ï¼Ÿ",
            answers: ["Political asylum.", "I joined some events against the Chinese government."],
            tip: "political asylum = æ”¿æ²»åº‡æŠ¤"
        },
        {
            id: "p3-21",
            category: "part3-9",
            phrasings: [
                { text: "How did you enter the United States?", style: "formal" },
                { text: "How did you come to the U.S.?", style: "normal" },
                { text: "How'd you enter?", style: "casual" }
            ],
            chinese: "ä½ æ˜¯æ€ä¹ˆè¿›å…¥ç¾å›½çš„ï¼Ÿ",
            answers: ["With a tourism visa.", "Tourist visa."],
            tip: "è¯´ä½ å…¥å¢ƒæ—¶ä½¿ç”¨çš„ç­¾è¯ç±»å‹ã€‚"
        },
        {
            id: "p3-22",
            category: "part3-9",
            phrasings: [
                { text: "When did you enter the United States?", style: "formal" },
                { text: "When did you come to America?", style: "normal" },
                { text: "Entry date?", style: "casual" }
            ],
            chinese: "ä½ ä»€ä¹ˆæ—¶å€™è¿›å…¥ç¾å›½çš„ï¼Ÿ",
            answers: ["May sixteenth, twenty seventeen.", "May 16, 2017."],
            tip: "è®°ä½ä½ ç¬¬ä¸€æ¬¡å…¥å¢ƒç¾å›½çš„æ—¥æœŸã€‚"
        },
        {
            id: "p3-23",
            category: "part3-9",
            phrasings: [
                { text: "Which port of entry did you use?", style: "formal" },
                { text: "Where did you enter the U.S.?", style: "normal" },
                { text: "Port of entry?", style: "casual" }
            ],
            chinese: "ä½ ä»å“ªä¸ªå…¥å¢ƒå£å²¸è¿›å…¥ç¾å›½ï¼Ÿ",
            answers: ["Los Angeles.", "LAX airport."],
            tip: "port of entry = å…¥å¢ƒå£å²¸ï¼ˆæœºåœºæˆ–è¾¹å¢ƒï¼‰"
        },
        {
            id: "p3-24",
            category: "part3-9",
            phrasings: [
                { text: "How many trips have you taken outside the United States in the last 5 years?", style: "formal" },
                { text: "How many times did you leave the U.S. in the past 5 years?", style: "normal" },
                { text: "Trips outside U.S.?", style: "casual" }
            ],
            chinese: "è¿‡å»5å¹´ä½ ç¦»å¼€ç¾å›½å‡ æ¬¡ï¼Ÿ",
            answers: ["Zero times.", "None.", "I haven't left the U.S."],
            tip: "å¦‚å®å›ç­”å‡ºå¢ƒæ¬¡æ•°ã€‚"
        },
        {
            id: "p3-25",
            category: "part3-9",
            phrasings: [
                { text: "Have you taken any trips longer than 6 months?", style: "formal" },
                { text: "Any trips over 6 months?", style: "normal" },
                { text: "Trips over 6 months?", style: "casual" }
            ],
            chinese: "ä½ æœ‰è¶…è¿‡6ä¸ªæœˆçš„æ—…è¡Œå—ï¼Ÿ",
            answers: ["No.", "No, I haven't."],
            tip: "è¶…è¿‡6ä¸ªæœˆå¯èƒ½å½±å“å±…ä½è¿ç»­æ€§ã€‚"
        },
        {
            id: "p3-26",
            category: "part3-9",
            phrasings: [
                { text: "Do you have an older passport?", style: "formal" },
                { text: "Previous passport?", style: "normal" },
                { text: "Old passport?", style: "casual" }
            ],
            chinese: "ä½ æœ‰æ—§æŠ¤ç…§å—ï¼Ÿ",
            answers: ["Yes, I do.", "No, I don't."],
            tip: "å¦‚æœæœ‰è¿‡æœŸçš„æŠ¤ç…§ï¼Œä¹Ÿè¦å¸¦å»é¢è¯•ã€‚"
        },
        {
            id: "p3-27",
            category: "part3-9",
            phrasings: [
                { text: "Do you have a Refugee Travel Document?", style: "formal" },
                { text: "Travel document?", style: "normal" }
            ],
            chinese: "ä½ æœ‰éš¾æ°‘æ—…è¡Œè¯ä»¶å—ï¼Ÿ",
            answers: ["Yes, I do.", "No, I don't."],
            tip: "åº‡æŠ¤è€…é€šå¸¸æœ‰è¿™ä¸ªæ–‡ä»¶ã€‚"
        },
        {
            id: "p3-28",
            category: "part3-9",
            phrasings: [
                { text: "How do you support yourself?", style: "formal" },
                { text: "How do you make a living?", style: "normal" },
                { text: "Income source?", style: "casual" }
            ],
            chinese: "ä½ å¦‚ä½•ç»´æŒç”Ÿæ´»ï¼Ÿ",
            answers: ["I work as a life insurance broker.", "By working."],
            tip: "è¯´ä½ çš„å·¥ä½œæˆ–æ”¶å…¥æ¥æºã€‚"
        },
        {
            id: "p3-29",
            category: "part3-9",
            phrasings: [
                { text: "Do you go to school now?", style: "formal" },
                { text: "Are you currently studying?", style: "normal" },
                { text: "Student?", style: "casual" }
            ],
            chinese: "ä½ ç°åœ¨ä¸Šå­¦å—ï¼Ÿ",
            answers: ["No, I don't.", "No."],
            tip: "å¦‚å®å›ç­”ã€‚"
        },
        {
            id: "p3-30",
            category: "part3-9",
            phrasings: [
                { text: "What did you do in your country before coming to the U.S.?", style: "formal" },
                { text: "What was your job in China?", style: "normal" },
                { text: "Job before U.S.?", style: "casual" }
            ],
            chinese: "æ¥ç¾å›½ä¹‹å‰ä½ åœ¨ä½ çš„å›½å®¶åšä»€ä¹ˆï¼Ÿ",
            answers: ["I was a [your previous job]."],
            tip: "è¯´ä½ åœ¨ä¸­å›½çš„èŒä¸šã€‚"
        },
        {
            id: "p3-31",
            category: "part3-9",
            phrasings: [
                { text: "Do you bring your marriage certificate?", style: "formal" },
                { text: "Marriage certificate?", style: "normal" }
            ],
            chinese: "ä½ å¸¦äº†ç»“å©šè¯å—ï¼Ÿ",
            answers: ["Yes, here it is.", "Yes."],
            tip: "é¢è¯•è¦å¸¦ç»“å©šè¯åŸä»¶ã€‚"
        },
        {
            id: "p3-32",
            category: "part3-9",
            phrasings: [
                { text: "Do you bring your tax returns?", style: "formal" },
                { text: "Tax returns?", style: "normal" },
                { text: "Taxes?", style: "casual" }
            ],
            chinese: "ä½ å¸¦äº†æŠ¥ç¨å•å—ï¼Ÿ",
            answers: ["Yes, here they are.", "Yes, I have my tax returns."],
            tip: "å¸¦è¿‘5å¹´çš„æŠ¥ç¨è®°å½•ã€‚"
        },
        {
            id: "p3-33",
            category: "part3-9",
            phrasings: [
                { text: "Did you work at another job at the same time?", style: "formal" },
                { text: "Any other job at the same time?", style: "normal" },
                { text: "Other job same time?", style: "casual" }
            ],
            chinese: "ä½ åŒæ—¶åšè¿‡å…¶ä»–å·¥ä½œå—ï¼Ÿ",
            answers: ["No.", "Yes, I also worked at [Company]."],
            tip: "å¦‚æœæœ‰å…¼èŒæˆ–å‰¯ä¸šè¦è¯´æ˜ã€‚"
        },
        {
            id: "p3-34",
            category: "part3-9",
            phrasings: [
                { text: "How often do you go to your Chinese democracy events?", style: "formal" },
                { text: "How often do you attend democracy meetings?", style: "normal" }
            ],
            chinese: "ä½ å¤šä¹…å‚åŠ ä¸€æ¬¡ä¸­å›½æ°‘ä¸»æ´»åŠ¨ï¼Ÿ",
            answers: ["A few times a year.", "Not very often now."],
            tip: "å¦‚æœé€šè¿‡æ°‘ä¸»æ´»åŠ¨è·å¾—åº‡æŠ¤ï¼Œè¦å‡†å¤‡è¿™ä¸ªé—®é¢˜ã€‚"
        },
        {
            id: "p3-35",
            category: "part3-9",
            phrasings: [
                { text: "Do you attend in person or online?", style: "formal" },
                { text: "In person or online?", style: "normal" }
            ],
            chinese: "ä½ äº²è‡ªå‚åŠ è¿˜æ˜¯åœ¨çº¿å‚åŠ ï¼Ÿ",
            answers: ["Both.", "Locally, in person.", "Online mostly."],
            tip: "å¦‚å®å›ç­”å‚ä¸æ–¹å¼ã€‚"
        }
    ],

    // Part 12: é“å¾·å“è´¨é—®é¢˜ "Have you ever..."
    part12: [
        {
            id: "p12-1",
            category: "part12",
            phrasings: [
                { text: "Have you ever claimed to be a U.S. citizen?", style: "formal" },
                { text: "Ever claimed to be a citizen?", style: "normal" },
                { text: "Claimed citizen?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»å£°ç§°è‡ªå·±æ˜¯ç¾å›½å…¬æ°‘å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["claimed", "U.S. citizen"],
            tip: "claimed = å£°ç§°ã€‚åœ¨æˆä¸ºå…¬æ°‘ä¹‹å‰ä¸èƒ½è¯´è‡ªå·±æ˜¯å…¬æ°‘ã€‚"
        },
        {
            id: "p12-2",
            category: "part12",
            phrasings: [
                { text: "Have you ever registered to vote in any election in the United States?", style: "formal" },
                { text: "Have you ever voted in the U.S.?", style: "normal" },
                { text: "Ever voted?", style: "casual" },
                { text: "Vote?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»åœ¨ç¾å›½ç™»è®°æŠ•ç¥¨æˆ–æŠ•ç¥¨å—ï¼Ÿ",
            answers: ["No, I have never voted.", "No."],
            keywords: ["registered", "vote"],
            tip: "ç»¿å¡æŒæœ‰è€…ä¸èƒ½æŠ•ç¥¨ï¼ŒæŠ•ç¥¨æ˜¯å…¬æ°‘çš„æƒåˆ©ã€‚"
        },
        {
            id: "p12-3",
            category: "part12",
            phrasings: [
                { text: "Do you currently owe any overdue Federal, state, or local taxes?", style: "formal" },
                { text: "Do you owe any taxes?", style: "normal" },
                { text: "Owe taxes?", style: "casual" }
            ],
            chinese: "ä½ ç›®å‰æ˜¯å¦æ‹–æ¬ ä»»ä½•è”é‚¦ã€å·æˆ–åœ°æ–¹ç¨ï¼Ÿ",
            answers: ["No, I don't owe any taxes.", "No."],
            keywords: ["owe", "taxes", "overdue"],
            tip: "owe = æ¬ ã€‚ç¡®ä¿æŒ‰æ—¶æŠ¥ç¨å’Œç¼´ç¨ã€‚"
        },
        {
            id: "p12-4",
            category: "part12",
            phrasings: [
                { text: "Do you always file your taxes?", style: "formal" },
                { text: "Do you file taxes every year?", style: "normal" },
                { text: "File taxes?", style: "casual" }
            ],
            chinese: "ä½ æ¯å¹´éƒ½æŠ¥ç¨å—ï¼Ÿ",
            answers: ["Yes, I always file my taxes on time.", "Yes."],
            keywords: ["file", "taxes"],
            tip: "file = ç”³æŠ¥ã€‚ç¡®ä¿æ¯å¹´æŒ‰æ—¶æŠ¥ç¨ã€‚"
        },
        {
            id: "p12-5",
            category: "part12",
            phrasings: [
                { text: "Have you ever called yourself a nonresident on a tax return?", style: "formal" },
                { text: "Ever claimed to be a nonresident on taxes?", style: "normal" },
                { text: "Called yourself nonresident?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»åœ¨æŠ¥ç¨è¡¨ä¸Šç§°è‡ªå·±ä¸ºéå±…æ°‘å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["nonresident", "tax return"],
            tip: "nonresident = éå±…æ°‘ã€‚ç»¿å¡æŒæœ‰è€…æ˜¯å±…æ°‘ã€‚"
        },
        {
            id: "p12-6",
            category: "part12",
            phrasings: [
                { text: "Have you ever been a member of the Communist Party?", style: "formal" },
                { text: "Were you ever in the Communist Party?", style: "normal" },
                { text: "Communist Party member?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»æ˜¯å…±äº§å…šå‘˜å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["member", "Communist Party"],
            tip: "Communist Party = å…±äº§å…šï¼ˆå¦‚ä¸­å›½ã€å¤å·´çš„æ‰§æ”¿å…šï¼‰"
        },
        {
            id: "p12-7",
            category: "part12",
            phrasings: [
                { text: "Have you ever been a member of a totalitarian party?", style: "formal" },
                { text: "Ever in a totalitarian party?", style: "normal" },
                { text: "Totalitarian party?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»æ˜¯ææƒä¸»ä¹‰æ”¿å…šæˆå‘˜å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["totalitarian", "party"],
            tip: "totalitarian = ææƒä¸»ä¹‰ï¼ˆä¸€å…šä¸“æ”¿ï¼Œæ²¡æœ‰è‡ªç”±ï¼‰"
        },
        {
            id: "p12-8",
            category: "part12",
            phrasings: [
                { text: "Have you ever advocated the overthrow of any government by force?", style: "formal" },
                { text: "Ever supported overthrowing a government?", style: "normal" },
                { text: "Overthrow government?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»ä¸»å¼ ç”¨æ­¦åŠ›æ¨ç¿»ä»»ä½•æ”¿åºœå—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["advocated", "overthrow"],
            tip: "overthrow = æ¨ç¿»ã€‚advocated = ä¸»å¼ /æ”¯æŒ"
        },
        {
            id: "p12-9",
            category: "part12",
            phrasings: [
                { text: "Have you ever persecuted any person?", style: "formal" },
                { text: "Ever persecuted anyone?", style: "normal" },
                { text: "Persecuted?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»è¿«å®³è¿‡ä»»ä½•äººå—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["persecuted"],
            tip: "persecuted = è¿«å®³ï¼ˆå› ä¸ºç§æ—ã€å®—æ•™ç­‰ä¼¤å®³åˆ«äººï¼‰"
        },
        {
            id: "p12-10",
            category: "part12",
            phrasings: [
                { text: "Have you ever participated in genocide?", style: "formal" },
                { text: "Ever involved in genocide?", style: "normal" },
                { text: "Genocide?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»å‚ä¸ç§æ—ç­ç»å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["genocide"],
            tip: "genocide = ç§æ—ç­ç»ï¼ˆå¤§è§„æ¨¡å± æ€æŸä¸€ç§æ—çš„äººï¼‰"
        },
        {
            id: "p12-11",
            category: "part12",
            phrasings: [
                { text: "Have you ever participated in torture?", style: "formal" },
                { text: "Ever tortured anyone?", style: "normal" },
                { text: "Torture?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»å‚ä¸é…·åˆ‘å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["torture"],
            tip: "torture = é…·åˆ‘/æŠ˜ç£¨ï¼ˆè®©äººä¸¥é‡ç—›è‹¦ï¼‰"
        },
        {
            id: "p12-12",
            category: "part12",
            phrasings: [
                { text: "Have you ever killed or tried to kill anyone?", style: "formal" },
                { text: "Ever killed anyone?", style: "normal" },
                { text: "Kill?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»æ€å®³æˆ–è¯•å›¾æ€å®³ä»»ä½•äººå—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["killed", "kill"],
            tip: "kill = æ€å®³"
        },
        {
            id: "p12-13",
            category: "part12",
            phrasings: [
                { text: "Have you ever intentionally injured anyone?", style: "formal" },
                { text: "Ever hurt anyone seriously?", style: "normal" },
                { text: "Injure?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»æ•…æ„ä¼¤å®³ä»»ä½•äººå—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["injured", "injure"],
            tip: "injure = ä¼¤å®³"
        },
        {
            id: "p12-14",
            category: "part12",
            phrasings: [
                { text: "Have you ever served in any military unit?", style: "formal" },
                { text: "Were you ever in the military?", style: "normal" },
                { text: "Military?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»åœ¨ä»»ä½•å†›äº‹å•ä½æœå½¹å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["military", "served"],
            tip: "military = å†›é˜Ÿ"
        },
        {
            id: "p12-15",
            category: "part12",
            phrasings: [
                { text: "Have you ever served in a police unit?", style: "formal" },
                { text: "Were you ever a police officer?", style: "normal" },
                { text: "Police?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»åœ¨è­¦å¯Ÿå•ä½æœå½¹å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["police"],
            tip: "åŒ…æ‹¬ä»»ä½•å›½å®¶çš„è­¦å¯Ÿã€‚"
        },
        {
            id: "p12-16",
            category: "part12",
            phrasings: [
                { text: "Have you ever been a member of a paramilitary group?", style: "formal" },
                { text: "Ever in a paramilitary unit?", style: "normal" },
                { text: "Paramilitary?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»æ˜¯å‡†å†›äº‹ç»„ç»‡æˆå‘˜å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["paramilitary"],
            tip: "paramilitary = å‡†å†›äº‹ç»„ç»‡ï¼ˆåƒå†›é˜Ÿä½†éå®˜æ–¹ï¼‰"
        },
        {
            id: "p12-17",
            category: "part12",
            phrasings: [
                { text: "Have you ever been a member of a rebel group?", style: "formal" },
                { text: "Ever in a rebel group?", style: "normal" },
                { text: "Rebel group?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»æ˜¯å›å†›ç»„ç»‡æˆå‘˜å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["rebel"],
            tip: "rebel group = å›å†›ï¼ˆåæŠ—æ”¿åºœçš„æ­¦è£…ç»„ç»‡ï¼‰"
        },
        {
            id: "p12-18",
            category: "part12",
            phrasings: [
                { text: "Have you ever been a member of a guerrilla group?", style: "formal" },
                { text: "Ever in a guerrilla group?", style: "normal" },
                { text: "Guerrilla?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»æ˜¯æ¸¸å‡»é˜Ÿæˆå‘˜å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["guerrilla"],
            tip: "guerrilla = æ¸¸å‡»é˜Ÿ"
        },
        {
            id: "p12-19",
            category: "part12",
            phrasings: [
                { text: "Have you ever worked in a prison or jail?", style: "formal" },
                { text: "Ever worked in a prison?", style: "normal" },
                { text: "Prison work?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»åœ¨ç›‘ç‹±å·¥ä½œè¿‡å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["prison", "jail"],
            tip: "prison/jail = ç›‘ç‹±"
        },
        {
            id: "p12-20",
            category: "part12",
            phrasings: [
                { text: "Have you ever worked in a detention facility?", style: "formal" },
                { text: "Ever worked at a detention center?", style: "normal" },
                { text: "Detention?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»åœ¨æ‹˜ç•™æ‰€å·¥ä½œè¿‡å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["detention"],
            tip: "detention = æ‹˜ç•™ï¼ˆè¢«å¼ºåˆ¶å…³æŠ¼ï¼‰"
        },
        {
            id: "p12-21",
            category: "part12",
            phrasings: [
                { text: "Have you ever worked in a labor camp?", style: "formal" },
                { text: "Ever worked at a labor camp?", style: "normal" },
                { text: "Labor camp?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»åœ¨åŠ³æ”¹è¥å·¥ä½œè¿‡å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["labor camp"],
            tip: "labor camp = åŠ³æ”¹è¥ï¼ˆå¼ºåˆ¶åŠ³åŠ¨ï¼‰"
        },
        {
            id: "p12-22",
            category: "part12",
            phrasings: [
                { text: "Have you ever used a weapon against any person?", style: "formal" },
                { text: "Ever used a weapon on someone?", style: "normal" },
                { text: "Used weapon?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»å¯¹ä»»ä½•äººä½¿ç”¨æ­¦å™¨å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["weapon"],
            tip: "weapon = æ­¦å™¨ï¼ˆæªã€åˆ€ç­‰ï¼‰"
        },
        {
            id: "p12-23",
            category: "part12",
            phrasings: [
                { text: "Have you ever sold or provided weapons to anyone?", style: "formal" },
                { text: "Ever sold weapons?", style: "normal" },
                { text: "Sold weapons?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»å‡ºå”®æˆ–æä¾›æ­¦å™¨ç»™ä»»ä½•äººå—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["sold", "weapons"],
            tip: "sold = å‡ºå”®"
        },
        {
            id: "p12-24",
            category: "part12",
            phrasings: [
                { text: "Have you ever received any weapons training?", style: "formal" },
                { text: "Ever had weapons training?", style: "normal" },
                { text: "Weapons training?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»æ¥å—è¿‡ä»»ä½•æ­¦å™¨è®­ç»ƒå—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["weapons training"],
            tip: "åŒ…æ‹¬å†›äº‹è®­ç»ƒã€å°„å‡»è®­ç»ƒç­‰ã€‚"
        },
        {
            id: "p12-25",
            category: "part12",
            phrasings: [
                { text: "Have you ever recruited anyone under 15 to join an armed group?", style: "formal" },
                { text: "Ever recruited children for armed groups?", style: "normal" },
                { text: "Recruited under 15?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»æ‹›å‹Ÿ15å²ä»¥ä¸‹çš„äººåŠ å…¥æ­¦è£…å›¢ä½“å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["recruited", "under 15"],
            tip: "recruited = æ‹›å‹Ÿ"
        },
        {
            id: "p12-26",
            category: "part12",
            phrasings: [
                { text: "Have you ever committed a crime that you were not arrested for?", style: "formal" },
                { text: "Ever committed a crime without being caught?", style: "normal" },
                { text: "Crime not arrested?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»çŠ¯è¿‡ä½†æ²¡æœ‰è¢«é€®æ•çš„ç½ªè¡Œå—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["committed", "crime", "not arrested"],
            tip: "å³ä½¿æ²¡è¢«æŠ“ä¹Ÿè¦å¦‚å®å›ç­”ï¼ˆä½†é€šå¸¸å›ç­”Noï¼‰"
        },
        {
            id: "p12-27",
            category: "part12",
            phrasings: [
                { text: "Have you ever been arrested, cited, or detained?", style: "formal" },
                { text: "Have you ever been arrested?", style: "normal" },
                { text: "Ever arrested?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»è¢«é€®æ•ã€ä¼ è®¯æˆ–æ‹˜ç•™å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["arrested", "cited", "detained"],
            tip: "arrested=é€®æ•, cited=å¼€ç½šå•/ä¼ è®¯, detained=æ‹˜ç•™"
        },
        {
            id: "p12-28",
            category: "part12",
            phrasings: [
                { text: "Do you have any problems with the police?", style: "formal" },
                { text: "Any trouble with the police?", style: "normal" },
                { text: "Police problems?", style: "casual" }
            ],
            chinese: "ä½ å’Œè­¦å¯Ÿæœ‰ä»»ä½•é—®é¢˜å—ï¼Ÿ",
            answers: ["No, I don't.", "No."],
            keywords: ["problems", "police"],
            tip: "åŒ…æ‹¬ä»»ä½•ä¸æ‰§æ³•éƒ¨é—¨çš„æ¥è§¦ã€‚"
        },
        {
            id: "p12-29",
            category: "part12",
            phrasings: [
                { text: "Have you ever been a habitual drunkard?", style: "formal" },
                { text: "Have you ever had a drinking problem?", style: "normal" },
                { text: "Habitual drunkard?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»æ˜¯æƒ¯æ€§é…—é…’è€…å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["habitual drunkard"],
            tip: "habitual drunkard = æƒ¯æ€§é…—é…’è€…"
        },
        {
            id: "p12-30",
            category: "part12",
            phrasings: [
                { text: "Have you ever been a prostitute?", style: "formal" },
                { text: "Ever engaged in prostitution?", style: "normal" },
                { text: "Prostitution?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»ä»äº‹å–æ·«å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["prostitute", "prostitution"],
            tip: "prostitute = å¦“å¥³/å–æ·«è€…"
        },
        {
            id: "p12-31",
            category: "part12",
            phrasings: [
                { text: "Have you ever sold or smuggled illegal drugs?", style: "formal" },
                { text: "Ever sold drugs?", style: "normal" },
                { text: "Sold drugs?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»å‡ºå”®æˆ–èµ°ç§éæ³•æ¯’å“å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["sold", "smuggled", "drugs"],
            tip: "smuggled = èµ°ç§"
        },
        {
            id: "p12-32",
            category: "part12",
            phrasings: [
                { text: "Have you ever been married to more than one person at the same time?", style: "formal" },
                { text: "Ever had more than one spouse at a time?", style: "normal" },
                { text: "Multiple marriages same time?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»åŒæ—¶ä¸å¤šäººç»“å©šå—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["married", "more than one"],
            tip: "è¿™æ˜¯é—®é‡å©šï¼Œç¾å›½ä¸å…è®¸ã€‚"
        },
        {
            id: "p12-33",
            category: "part12",
            phrasings: [
                { text: "Have you ever married someone to obtain immigration benefits?", style: "formal" },
                { text: "Ever married for a green card?", style: "normal" },
                { text: "Marriage for immigration?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»ä¸ºäº†è·å¾—ç§»æ°‘ç¦åˆ©è€Œç»“å©šå—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["married", "immigration benefit"],
            tip: "å‡ç»“å©šæ˜¯éæ³•çš„ã€‚"
        },
        {
            id: "p12-34",
            category: "part12",
            phrasings: [
                { text: "Have you ever helped anyone enter the United States illegally?", style: "formal" },
                { text: "Ever helped someone enter the U.S. illegally?", style: "normal" },
                { text: "Helped illegal entry?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»å¸®åŠ©ä»»ä½•äººéæ³•è¿›å…¥ç¾å›½å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["helped", "enter", "illegally"],
            tip: "åŒ…æ‹¬äººå£èµ°ç§æˆ–å¸®åŠ©å·æ¸¡ã€‚"
        },
        {
            id: "p12-35",
            category: "part12",
            phrasings: [
                { text: "Have you ever gambled illegally?", style: "formal" },
                { text: "Ever gambled illegally?", style: "normal" },
                { text: "Illegal gambling?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»éæ³•èµŒåšå—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["gambled", "illegally"],
            tip: "gambling = èµŒåš"
        },
        {
            id: "p12-36",
            category: "part12",
            phrasings: [
                { text: "Have you ever failed to support your dependents?", style: "formal" },
                { text: "Do you pay child support?", style: "normal" },
                { text: "Support dependents?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»æœªèƒ½æŠšå…»ä½ çš„å—æŠšå…»äººå—ï¼Ÿ",
            answers: ["No, I have always supported them.", "No."],
            keywords: ["failed", "support", "dependents"],
            tip: "dependents = å—æŠšå…»äººï¼ˆå¦‚å­å¥³ï¼‰"
        },
        {
            id: "p12-37",
            category: "part12",
            phrasings: [
                { text: "Have you ever given false information to any U.S. government official?", style: "formal" },
                { text: "Ever given false info to the government?", style: "normal" },
                { text: "False info?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»å‘ç¾å›½æ”¿åºœå®˜å‘˜æä¾›è™šå‡ä¿¡æ¯å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["false", "information"],
            tip: "false = å‡çš„ï¼Œfraudulent = æ¬ºè¯ˆçš„"
        },
        {
            id: "p12-38",
            category: "part12",
            phrasings: [
                { text: "Have you ever lied to any U.S. government official to gain immigration benefits?", style: "formal" },
                { text: "Ever lied to get immigration benefits?", style: "normal" },
                { text: "Lied for benefits?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»ä¸ºè·å¾—ç§»æ°‘ç¦åˆ©è€Œæ¬ºéª—æ”¿åºœå®˜å‘˜å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["lied", "immigration benefits"],
            tip: "lied = è¯´è°"
        },
        {
            id: "p12-39",
            category: "part12",
            phrasings: [
                { text: "Have you ever been removed or deported from the United States?", style: "formal" },
                { text: "Ever been deported?", style: "normal" },
                { text: "Deported?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»è¢«ä»ç¾å›½é£è¿”æˆ–é©±é€å‡ºå¢ƒå—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["removed", "deported"],
            tip: "deported = é©±é€å‡ºå¢ƒ"
        },
        {
            id: "p12-40",
            category: "part12",
            phrasings: [
                { text: "Have you ever been placed in deportation proceedings?", style: "formal" },
                { text: "Ever been in deportation proceedings?", style: "normal" },
                { text: "Deportation proceedings?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»è¢«ç½®äºé©±é€å‡ºå¢ƒç¨‹åºä¸­å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["deportation proceedings"],
            tip: "proceedings = æ³•å¾‹ç¨‹åº"
        },
        {
            id: "p12-41",
            category: "part12",
            phrasings: [
                { text: "Are you a male who lived in the United States between your 18th and 26th birthdays?", style: "formal" },
                { text: "Did you live in the U.S. between ages 18 and 26?", style: "normal" },
                { text: "Male, 18-26 in U.S.?", style: "casual" }
            ],
            chinese: "ä½ æ˜¯å¦åœ¨18è‡³26å²ä¹‹é—´ä»¥ç”·æ€§èº«ä»½å±…ä½åœ¨ç¾å›½ï¼Ÿ",
            answers: ["No.", "Yes."],
            keywords: ["male", "18", "26"],
            tip: "å¦‚æœYesï¼Œéœ€è¦æ³¨å†ŒSelective Serviceï¼ˆå…µå½¹ç™»è®°ï¼‰"
        },
        {
            id: "p12-42",
            category: "part12",
            phrasings: [
                { text: "Did you register for the Selective Service?", style: "formal" },
                { text: "Did you register for the draft?", style: "normal" },
                { text: "Selective Service?", style: "casual" }
            ],
            chinese: "ä½ ç™»è®°äº†å…µå½¹å—ï¼Ÿ",
            answers: ["Yes, I did.", "No, I was over 26 when I became a resident."],
            keywords: ["Selective Service", "register"],
            tip: "Selective Service = å…µå½¹ç™»è®°ï¼ˆ18-26å²ç”·æ€§å±…æ°‘å¿…é¡»ç™»è®°ï¼‰"
        },
        {
            id: "p12-43",
            category: "part12",
            phrasings: [
                { text: "Have you ever left the United States to avoid being drafted?", style: "formal" },
                { text: "Ever left to avoid the draft?", style: "normal" },
                { text: "Avoid draft?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»ç¦»å¼€ç¾å›½ä»¥é¿å…è¢«å¾å…µå—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["left", "avoid", "drafted"],
            tip: "drafted = è¢«å¾å¬å…¥ä¼"
        },
        {
            id: "p12-44",
            category: "part12",
            phrasings: [
                { text: "Have you ever served in the U.S. armed forces?", style: "formal" },
                { text: "Ever served in the U.S. military?", style: "normal" },
                { text: "U.S. military?", style: "casual" }
            ],
            chinese: "ä½ æ›¾ç»åœ¨ç¾å›½å†›é˜Ÿæœå½¹å—ï¼Ÿ",
            answers: ["No, I have not.", "No."],
            keywords: ["served", "U.S. armed forces"],
            tip: "armed forces = å†›é˜Ÿ"
        },
        {
            id: "p12-45",
            category: "part12",
            phrasings: [
                { text: "Do you have a hereditary title in any foreign country?", style: "formal" },
                { text: "Do you have a title of nobility?", style: "normal" },
                { text: "Noble title?", style: "casual" }
            ],
            chinese: "ä½ åœ¨ä»»ä½•å¤–å›½æ‹¥æœ‰ä¸–è¢­å¤´è¡”å—ï¼Ÿ",
            answers: ["No, I don't.", "No."],
            keywords: ["hereditary title", "nobility"],
            tip: "å¦‚ç‹å­ã€å…¬çˆµç­‰è´µæ—å¤´è¡”"
        }
    ],

    // Oath æ•ˆå¿ èª“è¯ç›¸å…³é—®é¢˜
    oath: [
        {
            id: "o1",
            category: "oath",
            phrasings: [
                { text: "Do you support the Constitution and form of Government of the United States?", style: "formal" },
                { text: "Do you support the Constitution?", style: "normal" },
                { text: "Support Constitution?", style: "casual" }
            ],
            chinese: "ä½ æ˜¯å¦æ”¯æŒç¾å›½å®ªæ³•å’Œæ”¿åºœå½¢å¼ï¼Ÿ",
            answers: ["Yes, I do.", "Yes."],
            tip: "Constitution = å®ªæ³•"
        },
        {
            id: "o2",
            category: "oath",
            phrasings: [
                { text: "Do you understand the full Oath of Allegiance to the United States?", style: "formal" },
                { text: "Do you understand the Oath?", style: "normal" },
                { text: "Understand the Oath?", style: "casual" }
            ],
            chinese: "ä½ æ˜¯å¦ç†è§£ç¾å›½æ•ˆå¿ èª“è¯çš„å…¨éƒ¨å†…å®¹ï¼Ÿ",
            answers: ["Yes, I do.", "Yes."],
            tip: "Oath of Allegiance = æ•ˆå¿ èª“è¯"
        },
        {
            id: "o3",
            category: "oath",
            phrasings: [
                { text: "Are you willing to take the full Oath of Allegiance to the United States?", style: "formal" },
                { text: "Will you take the Oath?", style: "normal" },
                { text: "Take the Oath?", style: "casual" }
            ],
            chinese: "ä½ æ˜¯å¦æ„¿æ„å®£è¯»å®Œæ•´çš„æ•ˆå¿ èª“è¯ï¼Ÿ",
            answers: ["Yes, I am.", "Yes."],
            tip: "willing = æ„¿æ„"
        },
        {
            id: "o4",
            category: "oath",
            phrasings: [
                { text: "If the law requires it, are you willing to bear arms on behalf of the United States?", style: "formal" },
                { text: "Will you bear arms for the U.S. if required?", style: "normal" },
                { text: "Bear arms?", style: "casual" }
            ],
            chinese: "å¦‚æœæ³•å¾‹è¦æ±‚ï¼Œä½ æ˜¯å¦æ„¿æ„ä»£è¡¨ç¾å›½æºå¸¦æ­¦å™¨å‚æˆ˜ï¼Ÿ",
            answers: ["Yes, I am.", "Yes."],
            tip: "bear arms = æºå¸¦æ­¦å™¨ï¼ˆå‚å†›ä½œæˆ˜ï¼‰"
        },
        {
            id: "o5",
            category: "oath",
            phrasings: [
                { text: "If the law requires it, are you willing to perform noncombatant services in the U.S. armed forces?", style: "formal" },
                { text: "Will you perform noncombatant service if required?", style: "normal" },
                { text: "Noncombatant service?", style: "casual" }
            ],
            chinese: "å¦‚æœæ³•å¾‹è¦æ±‚ï¼Œä½ æ˜¯å¦æ„¿æ„åœ¨ç¾å›½å†›é˜Ÿä¸­ä»äº‹éæˆ˜æ–—æœåŠ¡ï¼Ÿ",
            answers: ["Yes, I am.", "Yes."],
            tip: "noncombatant = éæˆ˜æ–—æ€§çš„ï¼ˆå¦‚åŒ»ç–—ã€åå‹¤ï¼‰"
        },
        {
            id: "o6",
            category: "oath",
            phrasings: [
                { text: "If the law requires it, are you willing to perform work of national importance under civilian direction?", style: "formal" },
                { text: "Will you do civilian work of national importance if required?", style: "normal" },
                { text: "Work of national importance?", style: "casual" }
            ],
            chinese: "å¦‚æœæ³•å¾‹è¦æ±‚ï¼Œä½ æ˜¯å¦æ„¿æ„åœ¨æ°‘äº‹æŒ‡æŒ¥ä¸‹ä»äº‹å¯¹å›½å®¶æœ‰é‡è¦æ„ä¹‰çš„å·¥ä½œï¼Ÿ",
            answers: ["Yes, I am.", "Yes."],
            tip: "civilian direction = æ°‘äº‹æŒ‡æŒ¥ï¼ˆéå†›äº‹ï¼‰"
        },
        {
            id: "o7",
            category: "oath",
            phrasings: [
                { text: "Are you unable to take the Oath because of a physical or mental disability?", style: "formal" },
                { text: "Do you have any disability preventing you from taking the Oath?", style: "normal" },
                { text: "Disability?", style: "casual" }
            ],
            chinese: "ç”±äºèº«ä½“æˆ–ç²¾ç¥éšœç¢ï¼Œä½ æ˜¯å¦æ— æ³•å®£èª“æ•ˆå¿ ï¼Ÿ",
            answers: ["No, I am able to take the Oath.", "No."],
            tip: "å¦‚æœæœ‰æ®‹ç–¾å¯ä»¥ç”³è¯·è±å…ã€‚"
        },
        {
            id: "o8",
            category: "oath",
            phrasings: [
                { text: "What does 'bear arms' mean?", style: "formal" },
                { text: "What is bear arms?", style: "normal" }
            ],
            chinese: "'bear arms' æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",
            answers: ["It means to carry weapons or fight for the country."],
            tip: "bear arms = æºå¸¦æ­¦å™¨ï¼Œä¸ºå›½å®¶æˆ˜æ–—"
        },
        {
            id: "o9",
            category: "oath",
            phrasings: [
                { text: "What does 'noncombatant' mean?", style: "formal" },
                { text: "What is noncombatant?", style: "normal" }
            ],
            chinese: "'noncombatant' æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",
            answers: ["It means not fighting, like medical or support work."],
            tip: "noncombatant = éæˆ˜æ–—çš„ï¼Œä¸ç”¨æ‰“ä»—"
        },
        {
            id: "o10",
            category: "oath",
            phrasings: [
                { text: "What does 'work of national importance' mean?", style: "formal" },
                { text: "What is work of national importance?", style: "normal" }
            ],
            chinese: "'work of national importance' æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",
            answers: ["It means doing important work for the country, like driving, cooking, or helping the government."],
            tip: "ä¸ºå›½å®¶åšé‡è¦çš„éå†›äº‹å·¥ä½œ"
        }
    ]
};

// æ¨¡æ‹Ÿé¢è¯•æ¨¡å¼ï¼šä»å„éƒ¨åˆ†éšæœºæŠ½å–é—®é¢˜
function getMockInterviewQuestions(count = 25) {
    const allQuestions = [];

    // ä»æ¯ä¸ªç±»åˆ«æŠ½å–
    const categories = ['warmup', 'part2', 'part3-9', 'part12', 'oath'];
    const distribution = {
        warmup: 3,
        part2: 5,
        'part3-9': 7,
        part12: 8,
        oath: 2
    };

    categories.forEach(cat => {
        const questions = questionDatabase[cat];
        const shuffled = [...questions].sort(() => Math.random() - 0.5);
        allQuestions.push(...shuffled.slice(0, distribution[cat]));
    });

    // æ‰“ä¹±é¡ºåºä½†ä¿æŒçƒ­èº«é¢˜åœ¨å‰é¢
    const warmupQuestions = allQuestions.filter(q => q.category === 'warmup');
    const otherQuestions = allQuestions.filter(q => q.category !== 'warmup')
        .sort(() => Math.random() - 0.5);

    return [...warmupQuestions, ...otherQuestions];
}

// è·å–æ¨¡å—çš„æ‰€æœ‰é—®é¢˜
function getModuleQuestions(module) {
    if (module === 'mock') {
        return getMockInterviewQuestions();
    }
    return questionDatabase[module] || [];
}

// è·å–éšæœºé—®æ³•
function getRandomPhrasing(question, difficulty = 'normal') {
    const phrasings = question.phrasings;

    if (difficulty === 'easy') {
        // å…¥é—¨æ¨¡å¼ï¼šåªç”¨æ­£å¼é—®æ³•
        const formal = phrasings.find(p => p.style === 'formal') || phrasings[0];
        return formal.text;
    } else if (difficulty === 'hard') {
        // æŒ‘æˆ˜æ¨¡å¼ï¼šå€¾å‘äºç”¨ç®€çŸ­é—®æ³•
        const casual = phrasings.filter(p => p.style === 'casual');
        if (casual.length > 0) {
            return casual[Math.floor(Math.random() * casual.length)].text;
        }
    }

    // æ­£å¸¸æ¨¡å¼ï¼šéšæœºé€‰æ‹©
    return phrasings[Math.floor(Math.random() * phrasings.length)].text;
}

// æ¨¡å—ä¿¡æ¯
const moduleInfo = {
    warmup: {
        title: "çƒ­èº«é—®é¢˜ Warm-up",
        titleEn: "Warm-up Questions",
        description: "é¢è¯•å¼€åœºç™½ä¸åŸºæœ¬å¯’æš„"
    },
    part2: {
        title: "Part 2: ä¸ªäººä¿¡æ¯",
        titleEn: "Personal Information",
        description: "å§“åã€ç”Ÿæ—¥ã€åœ°å€ç­‰åŸºæœ¬ä¿¡æ¯"
    },
    "part3-9": {
        title: "Part 3-9: å†å²ä¿¡æ¯",
        titleEn: "Background Information",
        description: "å±…ä½ã€å·¥ä½œã€æ—…è¡Œã€å©šå§»ã€å­å¥³"
    },
    part12: {
        title: "Part 12: é“å¾·å“è´¨",
        titleEn: "Good Moral Character",
        description: "Have you ever... æ˜¯éé¢˜"
    },
    oath: {
        title: "æ•ˆå¿ èª“è¯ Oath",
        titleEn: "Oath of Allegiance",
        description: "å®ªæ³•æ”¯æŒä¸æ•ˆå¿ å®£èª“é—®é¢˜"
    },
    mock: {
        title: "æ¨¡æ‹Ÿé¢è¯•",
        titleEn: "Mock Interview",
        description: "å®Œæ•´æ¨¡æ‹ŸçœŸå®é¢è¯•æµç¨‹"
    },
    vocabulary: {
        title: "ğŸ“š è¯æ±‡å­¦ä¹ ",
        titleEn: "Vocabulary Study",
        description: "N-400æ ¸å¿ƒè¯æ±‡ä¸åè¯è§£é‡Š"
    }
};

// ==================== è¯æ±‡è¡¨ / Glossary ====================
// æŒ‰ç±»åˆ«åˆ†ç»„çš„æ ¸å¿ƒè¯æ±‡

const vocabularyDatabase = {
    // åŸºæœ¬èº«ä»½è¯æ±‡
    identity: {
        title: "èº«ä»½ä¿¡æ¯ Identity",
        words: [
            {
                word: "Full Legal Name",
                pronunciation: "/fÊŠl ËˆliËÉ¡É™l neÉªm/",
                chinese: "æ³•å®šå…¨å",
                definition: "Your complete official name as shown on legal documents like your green card or passport.",
                example: "What is your full legal name? â€” My full legal name is Zhimeng Fan.",
                tip: "æŒ‰ç…§ç»¿å¡ä¸Šçš„é¡ºåºè¯´ï¼šFirst Name + Last Name"
            },
            {
                word: "Middle Name",
                pronunciation: "/ËˆmÉªdl neÉªm/",
                chinese: "ä¸­é—´å",
                definition: "A name between your first name and last name. Many Chinese people don't have one.",
                example: "Do you have a middle name? â€” No, I don't have a middle name.",
                tip: "ä¸­å›½äººé€šå¸¸æ²¡æœ‰ä¸­é—´åï¼Œå›ç­” No"
            },
            {
                word: "Maiden Name",
                pronunciation: "/ËˆmeÉªdn neÉªm/",
                chinese: "å©šå‰å§“",
                definition: "A woman's family name before she got married.",
                example: "What was your maiden name? â€” My maiden name was Zhang.",
                tip: "å¥³æ€§å©šåæ”¹å§“æ—¶ä¼šç”¨åˆ°"
            },
            {
                word: "Nickname",
                pronunciation: "/ËˆnÉªkneÉªm/",
                chinese: "æ˜µç§°ï¼Œç»°å·",
                definition: "An informal name used by friends or family instead of your real name.",
                example: "Do you have any nicknames? â€” Yes, my friends call me Kevin.",
                tip: "ä¹Ÿå« aliasï¼ˆåˆ«åï¼‰"
            },
            {
                word: "A-Number (Alien Registration Number)",
                pronunciation: "/eÉª ËˆnÊŒmbÉ™r/",
                chinese: "å¤–å›½äººç™»è®°å·ç ",
                definition: "A 9-digit number that USCIS assigns to immigrants. It starts with 'A-'.",
                example: "What is your A-Number? â€” My A-Number is A-215571545.",
                tip: "åœ¨ç»¿å¡æ­£é¢å¯ä»¥æ‰¾åˆ°"
            },
            {
                word: "Date of Birth (DOB)",
                pronunciation: "/deÉªt É™v bÉœËrÎ¸/",
                chinese: "å‡ºç”Ÿæ—¥æœŸ",
                definition: "The day you were born, written as month/day/year in the US.",
                example: "What is your date of birth? â€” October twenty-fifth, nineteen eighty-one.",
                tip: "ç”¨è‹±æ–‡è¯´æœˆä»½ï¼Œä¸è¦åªè¯´æ•°å­—"
            },
            {
                word: "Country of Birth",
                pronunciation: "/ËˆkÊŒntri É™v bÉœËrÎ¸/",
                chinese: "å‡ºç”Ÿå›½å®¶",
                definition: "The country where you were born.",
                example: "What is your country of birth? â€” China.",
                tip: "è¯´å›½å®¶åç§°å³å¯"
            },
            {
                word: "Nationality / Citizenship",
                pronunciation: "/nÃ¦ÊƒÉ™ËˆnÃ¦lÉ™ti/",
                chinese: "å›½ç±",
                definition: "The country you legally belong to as a citizen.",
                example: "What is your nationality? â€” Chinese.",
                tip: "nationality å’Œ citizenship æ„æ€ç›¸è¿‘"
            },
            {
                word: "Ethnicity",
                pronunciation: "/eÎ¸ËˆnÉªsÉ™ti/",
                chinese: "æ—è£”",
                definition: "Your cultural background. The form asks if you are Hispanic or Latino.",
                example: "Are you Hispanic or Latino? â€” No, I am not Hispanic or Latino.",
                tip: "ä¸­å›½äººå›ç­” 'Not Hispanic or Latino'"
            },
            {
                word: "Race",
                pronunciation: "/reÉªs/",
                chinese: "ç§æ—",
                definition: "Categories based on physical characteristics. Options include Asian, White, Black, etc.",
                example: "What is your race? â€” Asian.",
                tip: "ä¸­å›½äººé€‰æ‹© Asian"
            }
        ]
    },

    // å±…ä½ä¸åœ°å€
    residence: {
        title: "å±…ä½åœ°å€ Residence",
        words: [
            {
                word: "Physical Address",
                pronunciation: "/ËˆfÉªzÉªkl É™Ëˆdres/",
                chinese: "å®é™…å±…ä½åœ°å€",
                definition: "The place where you actually live, not a P.O. Box.",
                example: "What is your physical address? â€” 20751 E Rim Lane, Walnut, CA 91789.",
                tip: "ä½ çœŸæ­£ä½çš„åœ°æ–¹"
            },
            {
                word: "Mailing Address",
                pronunciation: "/ËˆmeÉªlÉªÅ‹ É™Ëˆdres/",
                chinese: "é‚®å¯„åœ°å€",
                definition: "The address where you receive mail. Can be different from where you live.",
                example: "Is your mailing address the same as your physical address? â€” Yes, it is.",
                tip: "æ”¶ä¿¡çš„åœ°å€ï¼Œå¯èƒ½å’Œä½å€ä¸åŒ"
            },
            {
                word: "Permanent Resident",
                pronunciation: "/ËˆpÉœËrmÉ™nÉ™nt ËˆrezÉªdÉ™nt/",
                chinese: "æ°¸ä¹…å±…æ°‘",
                definition: "Someone who has a green card and can legally live and work in the US permanently.",
                example: "When did you become a permanent resident? â€” April 27, 2020.",
                tip: "ä¹Ÿå« green card holder"
            },
            {
                word: "Lawful Permanent Resident (LPR)",
                pronunciation: "/ËˆlÉ”ËfÉ™l/",
                chinese: "åˆæ³•æ°¸ä¹…å±…æ°‘",
                definition: "The official term for someone with a green card.",
                example: "Are you a lawful permanent resident? â€” Yes, I am.",
                tip: "LPR æ˜¯å®˜æ–¹ç”¨è¯­"
            },
            {
                word: "Residence",
                pronunciation: "/ËˆrezÉªdÉ™ns/",
                chinese: "å±…ä½åœ°",
                definition: "The place where you live.",
                example: "How long have you lived at your current residence? â€” About 3 years.",
                tip: "residence = ä½æ‰€"
            }
        ]
    },

    // å©šå§»ä¸å®¶åº­
    family: {
        title: "å©šå§»å®¶åº­ Family",
        words: [
            {
                word: "Marital Status",
                pronunciation: "/ËˆmÃ¦rÉªtl ËˆsteÉªtÉ™s/",
                chinese: "å©šå§»çŠ¶å†µ",
                definition: "Whether you are single, married, divorced, widowed, or separated.",
                example: "What is your marital status? â€” I am married.",
                tip: "Singleå•èº«/Marriedå·²å©š/Divorcedç¦»å©š/Widowedä¸§å¶/Separatedåˆ†å±…"
            },
            {
                word: "Spouse",
                pronunciation: "/spaÊŠs/",
                chinese: "é…å¶",
                definition: "Your husband or wife.",
                example: "What is your spouse's name? â€” [Name].",
                tip: "spouse æ˜¯ä¸­æ€§è¯ï¼ŒåŒ…æ‹¬ä¸ˆå¤«å’Œå¦»å­"
            },
            {
                word: "Marriage Certificate",
                pronunciation: "/ËˆmÃ¦rÉªdÊ’ sÉ™rËˆtÉªfÉªkÉ™t/",
                chinese: "ç»“å©šè¯",
                definition: "Official document proving you are legally married.",
                example: "Do you have your marriage certificate? â€” Yes, here it is.",
                tip: "é¢è¯•æ—¶éœ€è¦å¸¦åŸä»¶"
            },
            {
                word: "Divorce Decree",
                pronunciation: "/dÉªËˆvÉ”Ërs dÉªËˆkriË/",
                chinese: "ç¦»å©šåˆ¤å†³ä¹¦",
                definition: "Legal document that ends a marriage.",
                example: "Do you have your divorce decree? â€” Yes.",
                tip: "å¦‚æœç¦»è¿‡å©šéœ€è¦å¸¦è¿™ä¸ªæ–‡ä»¶"
            },
            {
                word: "Biological Child",
                pronunciation: "/baÉªÉ™ËˆlÉ‘ËdÊ’Éªkl tÊƒaÉªld/",
                chinese: "äº²ç”Ÿå­å¥³",
                definition: "A child born to you, not adopted.",
                example: "Are they your biological children? â€” Yes, they are.",
                tip: "biological = äº²ç”Ÿçš„"
            },
            {
                word: "Stepchild",
                pronunciation: "/ËˆsteptÊƒaÉªld/",
                chinese: "ç»§å­å¥³",
                definition: "Your spouse's child from a previous relationship.",
                example: "Do you have any stepchildren? â€” No.",
                tip: "é…å¶å‰æ®µå…³ç³»çš„å­©å­"
            },
            {
                word: "Dependents",
                pronunciation: "/dÉªËˆpendÉ™nts/",
                chinese: "å—æŠšå…»äºº",
                definition: "People who rely on you for financial support, usually children.",
                example: "Do you support your dependents? â€” Yes, I do.",
                tip: "é€šå¸¸æŒ‡éœ€è¦ä½ æŠšå…»çš„å­å¥³"
            },
            {
                word: "Alimony",
                pronunciation: "/ËˆÃ¦lÉ™moÊŠni/",
                chinese: "èµ¡å…»è´¹",
                definition: "Money paid to a former spouse after divorce.",
                example: "Do you pay alimony? â€” No, I don't.",
                tip: "ç¦»å©šåç»™å‰é…å¶çš„è´¹ç”¨"
            },
            {
                word: "Child Support",
                pronunciation: "/tÊƒaÉªld sÉ™ËˆpÉ”Ërt/",
                chinese: "å­å¥³æŠšå…»è´¹",
                definition: "Money paid to support your children after divorce.",
                example: "Do you pay child support? â€” No, my children live with me.",
                tip: "ç»™å­©å­çš„æŠšå…»è´¹"
            }
        ]
    },

    // å·¥ä½œä¸æ•™è‚²
    employment: {
        title: "å·¥ä½œæ•™è‚² Employment",
        words: [
            {
                word: "Occupation",
                pronunciation: "/É‘ËkjuËˆpeÉªÊƒn/",
                chinese: "èŒä¸š",
                definition: "Your job or profession.",
                example: "What is your occupation? â€” Life Insurance Broker.",
                tip: "occupation = job = profession"
            },
            {
                word: "Employer",
                pronunciation: "/ÉªmËˆplÉ”ÉªÉ™r/",
                chinese: "é›‡ä¸»",
                definition: "The company or person you work for.",
                example: "Who is your employer? â€” Premier Financial Alliance.",
                tip: "ä½ å·¥ä½œçš„å…¬å¸"
            },
            {
                word: "Self-employed",
                pronunciation: "/self ÉªmËˆplÉ”Éªd/",
                chinese: "è‡ªé›‡ï¼Œè‡ªè¥èŒä¸š",
                definition: "Working for yourself, not for a company.",
                example: "Are you self-employed? â€” Yes, I run my own business.",
                tip: "è‡ªå·±å½“è€æ¿"
            },
            {
                word: "Unemployed",
                pronunciation: "/ÊŒnÉªmËˆplÉ”Éªd/",
                chinese: "å¤±ä¸š",
                definition: "Not having a job.",
                example: "Are you currently employed? â€” No, I am unemployed.",
                tip: "æ²¡æœ‰å·¥ä½œ"
            },
            {
                word: "Retired",
                pronunciation: "/rÉªËˆtaÉªÉ™rd/",
                chinese: "é€€ä¼‘",
                definition: "No longer working because of age.",
                example: "What do you do? â€” I am retired.",
                tip: "å› å¹´é¾„è€Œåœæ­¢å·¥ä½œ"
            }
        ]
    },

    // ç§»æ°‘ä¸èº«ä»½
    immigration: {
        title: "ç§»æ°‘èº«ä»½ Immigration",
        words: [
            {
                word: "Green Card",
                pronunciation: "/É¡riËn kÉ‘Ërd/",
                chinese: "ç»¿å¡",
                definition: "The card that shows you are a permanent resident of the US.",
                example: "May I see your green card? â€” Here you go.",
                tip: "æ°¸ä¹…å±…æ°‘å¡çš„ä¿—ç§°"
            },
            {
                word: "Naturalization",
                pronunciation: "/nÃ¦tÊƒÉ™rÉ™lÉ™ËˆzeÉªÊƒn/",
                chinese: "å…¥ç±ï¼Œå½’åŒ–",
                definition: "The process of becoming a US citizen.",
                example: "Why are you here? â€” For my naturalization interview.",
                tip: "å…¥ç±çš„æ­£å¼è¯´æ³•"
            },
            {
                word: "Asylum",
                pronunciation: "/É™ËˆsaÉªlÉ™m/ (é¥¿-å¡-å†·)",
                chinese: "åº‡æŠ¤",
                definition: "Protection given to people who fled their country due to persecution.",
                example: "How did you get your green card? â€” By asylum.",
                tip: "å‘éŸ³åƒ'é¥¿å¡å†·'"
            },
            {
                word: "Political Asylum",
                pronunciation: "/pÉ™ËˆlÉªtÉªkl É™ËˆsaÉªlÉ™m/",
                chinese: "æ”¿æ²»åº‡æŠ¤",
                definition: "Asylum granted because of political persecution.",
                example: "What kind of asylum? â€” Political asylum.",
                tip: "å› æ”¿æ²»åŸå› ç”³è¯·çš„åº‡æŠ¤"
            },
            {
                word: "Refugee",
                pronunciation: "/refjuËˆdÊ’iË/",
                chinese: "éš¾æ°‘",
                definition: "Someone who fled their country due to war or persecution.",
                example: "Are you a refugee? â€” Yes, I came as a refugee.",
                tip: "å› æˆ˜äº‰æˆ–è¿«å®³é€ƒç¦»çš„äºº"
            },
            {
                word: "Refugee Travel Document",
                pronunciation: "/ËˆtrÃ¦vl ËˆdÉ‘ËkjumÉ™nt/",
                chinese: "éš¾æ°‘æ—…è¡Œè¯ä»¶",
                definition: "Travel document for refugees and asylees who cannot use their country's passport.",
                example: "Do you have a Refugee Travel Document? â€” Yes.",
                tip: "åº‡æŠ¤è€…ç”¨æ¥æ—…è¡Œçš„è¯ä»¶"
            },
            {
                word: "Port of Entry",
                pronunciation: "/pÉ”Ërt É™v Ëˆentri/",
                chinese: "å…¥å¢ƒå£å²¸",
                definition: "The airport or border crossing where you entered the US.",
                example: "Which port of entry did you use? â€” Los Angeles.",
                tip: "ä½ è¿›å…¥ç¾å›½çš„åœ°ç‚¹"
            },
            {
                word: "Visa",
                pronunciation: "/ËˆviËzÉ™/",
                chinese: "ç­¾è¯",
                definition: "Official permission to enter a country.",
                example: "What visa did you use to enter? â€” Tourist visa.",
                tip: "è¿›å…¥å›½å®¶çš„è®¸å¯"
            },
            {
                word: "Deported / Removed",
                pronunciation: "/dÉªËˆpÉ”ËrtÉªd/",
                chinese: "è¢«é©±é€å‡ºå¢ƒ",
                definition: "Forced to leave a country by the government.",
                example: "Have you ever been deported? â€” No, I have not.",
                tip: "è¢«æ”¿åºœå¼ºåˆ¶ç¦»å¼€"
            },
            {
                word: "Deportation Proceedings",
                pronunciation: "/diËpÉ”ËrËˆteÉªÊƒn prÉ™ËˆsiËdÉªÅ‹z/",
                chinese: "é©±é€å‡ºå¢ƒç¨‹åº",
                definition: "Legal process to remove someone from the country.",
                example: "Have you been in deportation proceedings? â€” No.",
                tip: "é£è¿”çš„æ³•å¾‹ç¨‹åº"
            }
        ]
    },

    // ç¨åŠ¡ä¸æ³•å¾‹
    legal: {
        title: "ç¨åŠ¡æ³•å¾‹ Legal & Taxes",
        words: [
            {
                word: "File Taxes",
                pronunciation: "/faÉªl ËˆtÃ¦ksÉªz/",
                chinese: "æŠ¥ç¨",
                definition: "To submit your tax return to the government.",
                example: "Do you file your taxes every year? â€” Yes, I always file on time.",
                tip: "file = æäº¤ç”³æŠ¥"
            },
            {
                word: "Tax Return",
                pronunciation: "/tÃ¦ks rÉªËˆtÉœËrn/",
                chinese: "æŠ¥ç¨è¡¨",
                definition: "The forms you fill out to report your income to the government.",
                example: "Did you bring your tax returns? â€” Yes, here they are.",
                tip: "é¢è¯•æ—¶è¦å¸¦è¿‘5å¹´çš„ç¨å•"
            },
            {
                word: "Owe",
                pronunciation: "/oÊŠ/",
                chinese: "æ¬ ",
                definition: "To need to pay money to someone.",
                example: "Do you owe any taxes? â€” No, I don't owe any taxes.",
                tip: "owe = æ¬ é’±"
            },
            {
                word: "Overdue",
                pronunciation: "/oÊŠvÉ™rËˆduË/",
                chinese: "é€¾æœŸçš„ï¼Œè¿‡æœŸçš„",
                definition: "Past the due date, late.",
                example: "Do you have any overdue taxes? â€” No.",
                tip: "è¿‡äº†æœŸé™è¿˜æ²¡ä»˜"
            },
            {
                word: "Nonresident",
                pronunciation: "/nÉ‘ËnËˆrezÉªdÉ™nt/",
                chinese: "éå±…æ°‘",
                definition: "Someone who does not live in a place permanently.",
                example: "Have you claimed to be a nonresident? â€” No, I am a resident.",
                tip: "ç»¿å¡æŒæœ‰è€…æ˜¯å±…æ°‘ï¼Œä¸æ˜¯éå±…æ°‘"
            },
            {
                word: "Arrested",
                pronunciation: "/É™ËˆrestÉªd/",
                chinese: "è¢«é€®æ•",
                definition: "Taken into police custody.",
                example: "Have you ever been arrested? â€” No, I have not.",
                tip: "è¢«è­¦å¯ŸæŠ“"
            },
            {
                word: "Cited",
                pronunciation: "/ËˆsaÉªtÉªd/",
                chinese: "è¢«å¼€ç½šå•ï¼Œè¢«ä¼ è®¯",
                definition: "Given a ticket or notice to appear in court.",
                example: "Have you ever been cited? â€” No.",
                tip: "æ”¶åˆ°ç½šå•æˆ–ä¼ ç¥¨"
            },
            {
                word: "Detained",
                pronunciation: "/dÉªËˆteÉªnd/",
                chinese: "è¢«æ‹˜ç•™",
                definition: "Held by authorities, not allowed to leave.",
                example: "Have you ever been detained? â€” No.",
                tip: "è¢«å¼ºåˆ¶æ‰£æŠ¼"
            },
            {
                word: "Probation",
                pronunciation: "/proÊŠËˆbeÉªÊƒn/",
                chinese: "ç¼“åˆ‘",
                definition: "A period of supervision instead of jail time.",
                example: "Were you placed on probation? â€” No.",
                tip: "ä¸ç”¨åç‰¢ä½†è¦è¢«ç›‘ç£"
            },
            {
                word: "Parole",
                pronunciation: "/pÉ™ËˆroÊŠl/",
                chinese: "å‡é‡Š",
                definition: "Early release from prison with conditions.",
                example: "Have you completed your parole? â€” Not applicable.",
                tip: "æå‰å‡ºç‹±ä½†æœ‰æ¡ä»¶"
            }
        ]
    },

    // é“å¾·å“è´¨ï¼ˆPart 12æ ¸å¿ƒè¯æ±‡ï¼‰
    moralCharacter: {
        title: "é“å¾·å“è´¨ Moral Character",
        words: [
            {
                word: "Claimed",
                pronunciation: "/kleÉªmd/",
                chinese: "å£°ç§°ï¼Œå®£ç§°",
                definition: "Said that something is true, especially when it might not be.",
                example: "Have you ever claimed to be a US citizen? â€” No.",
                tip: "claim = å£°ç§°ï¼ˆå¯èƒ½ä¸æ˜¯çœŸçš„ï¼‰"
            },
            {
                word: "Vote / Registered to Vote",
                pronunciation: "/voÊŠt/",
                chinese: "æŠ•ç¥¨ / ç™»è®°æŠ•ç¥¨",
                definition: "To cast a ballot in an election / to sign up to be able to vote.",
                example: "Have you ever voted in the US? â€” No, I have never voted.",
                tip: "ç»¿å¡æŒæœ‰è€…ä¸èƒ½æŠ•ç¥¨"
            },
            {
                word: "Communist Party",
                pronunciation: "/ËˆkÉ‘ËmjunÉªst ËˆpÉ‘Ërti/",
                chinese: "å…±äº§å…š",
                definition: "A political party based on communism, like in China or Cuba.",
                example: "Were you ever a member of the Communist Party? â€” No.",
                tip: "å¦‚ä¸­å›½å…±äº§å…š"
            },
            {
                word: "Totalitarian",
                pronunciation: "/toÊŠtÃ¦lÉªËˆteriÉ™n/",
                chinese: "ææƒä¸»ä¹‰çš„",
                definition: "A government that has complete control and allows no freedom.",
                example: "Were you in a totalitarian party? â€” No.",
                tip: "ä¸€å…šä¸“æ”¿ï¼Œæ²¡æœ‰è‡ªç”±"
            },
            {
                word: "Advocated",
                pronunciation: "/ËˆÃ¦dvÉ™keÉªtÉªd/",
                chinese: "ä¸»å¼ ï¼Œæ”¯æŒ",
                definition: "Publicly supported or recommended.",
                example: "Have you advocated overthrowing any government? â€” No.",
                tip: "advocate = æ”¯æŒã€æå€¡"
            },
            {
                word: "Overthrow",
                pronunciation: "/oÊŠvÉ™rËˆÎ¸roÊŠ/",
                chinese: "æ¨ç¿»",
                definition: "To remove a government or leader by force.",
                example: "Have you supported overthrowing a government? â€” No.",
                tip: "ç”¨æ­¦åŠ›æ¨ç¿»æ”¿åºœ"
            },
            {
                word: "Persecuted",
                pronunciation: "/ËˆpÉœËrsÉªkjuËtÉªd/",
                chinese: "è¿«å®³",
                definition: "Treated cruelly because of race, religion, or beliefs.",
                example: "Have you ever persecuted anyone? â€” No.",
                tip: "å› ç§æ—ã€å®—æ•™ç­‰ä¼¤å®³ä»–äºº"
            },
            {
                word: "Genocide",
                pronunciation: "/ËˆdÊ’enÉ™saÉªd/",
                chinese: "ç§æ—ç­ç»",
                definition: "The deliberate killing of a large group of people, especially an ethnic group.",
                example: "Have you participated in genocide? â€” No.",
                tip: "å¤§è§„æ¨¡å± æ€æŸä¸€ç§æ—"
            },
            {
                word: "Torture",
                pronunciation: "/ËˆtÉ”ËrtÊƒÉ™r/",
                chinese: "é…·åˆ‘ï¼ŒæŠ˜ç£¨",
                definition: "Causing severe pain to someone as punishment or to get information.",
                example: "Have you ever participated in torture? â€” No.",
                tip: "è®©äººæåº¦ç—›è‹¦"
            },
            {
                word: "Weapon",
                pronunciation: "/ËˆwepÉ™n/",
                chinese: "æ­¦å™¨",
                definition: "Something used to hurt people, like guns or knives.",
                example: "Have you ever used a weapon against anyone? â€” No.",
                tip: "æªã€åˆ€ç­‰ä¼¤äººçš„ä¸œè¥¿"
            },
            {
                word: "Smuggled",
                pronunciation: "/ËˆsmÊŒÉ¡ld/",
                chinese: "èµ°ç§",
                definition: "Illegally transported goods or people across borders.",
                example: "Have you ever smuggled drugs? â€” No.",
                tip: "éæ³•è¿è¾“"
            },
            {
                word: "Prostitution",
                pronunciation: "/prÉ‘ËstÉªËˆtuËÊƒn/",
                chinese: "å–æ·«",
                definition: "The practice of having sex for money.",
                example: "Have you engaged in prostitution? â€” No.",
                tip: "æ€§äº¤æ˜“"
            },
            {
                word: "Gambling",
                pronunciation: "/ËˆÉ¡Ã¦mblÉªÅ‹/",
                chinese: "èµŒåš",
                definition: "Playing games for money.",
                example: "Have you gambled illegally? â€” No.",
                tip: "éæ³•èµŒåš"
            },
            {
                word: "Habitual Drunkard",
                pronunciation: "/hÉ™ËˆbÉªtÊƒuÉ™l ËˆdrÊŒÅ‹kÉ™rd/",
                chinese: "æƒ¯æ€§é…—é…’è€…",
                definition: "Someone who regularly drinks too much alcohol.",
                example: "Are you a habitual drunkard? â€” No.",
                tip: "ç»å¸¸å–é†‰çš„äºº"
            }
        ]
    },

    // å†›äº‹æœå½¹
    military: {
        title: "å†›äº‹æœå½¹ Military",
        words: [
            {
                word: "Armed Forces",
                pronunciation: "/É‘Ërmd ËˆfÉ”ËrsÉªz/",
                chinese: "æ­¦è£…éƒ¨é˜Ÿï¼Œå†›é˜Ÿ",
                definition: "The military forces of a country (Army, Navy, Air Force, etc.).",
                example: "Have you served in the US armed forces? â€” No.",
                tip: "åŒ…æ‹¬é™†å†›ã€æµ·å†›ã€ç©ºå†›ç­‰"
            },
            {
                word: "Military",
                pronunciation: "/ËˆmÉªlÉªteri/",
                chinese: "å†›äº‹çš„ï¼Œå†›é˜Ÿ",
                definition: "Related to the armed forces or soldiers.",
                example: "Have you had military training? â€” No.",
                tip: "ä¸å†›é˜Ÿç›¸å…³"
            },
            {
                word: "Paramilitary",
                pronunciation: "/pÃ¦rÉ™ËˆmÉªlÉªteri/",
                chinese: "å‡†å†›äº‹çš„",
                definition: "A group organized like a military but not part of the official armed forces.",
                example: "Were you in a paramilitary group? â€” No.",
                tip: "åƒå†›é˜Ÿä½†éå®˜æ–¹"
            },
            {
                word: "Rebel Group",
                pronunciation: "/Ëˆrebl É¡ruËp/",
                chinese: "å›å†›ç»„ç»‡",
                definition: "A group that fights against their government.",
                example: "Were you in a rebel group? â€” No.",
                tip: "åæŠ—æ”¿åºœçš„æ­¦è£…ç»„ç»‡"
            },
            {
                word: "Guerrilla",
                pronunciation: "/É¡É™ËˆrÉªlÉ™/",
                chinese: "æ¸¸å‡»é˜Ÿ",
                definition: "A member of a small fighting group that attacks by surprise.",
                example: "Were you in a guerrilla group? â€” No.",
                tip: "æ‰“æ¸¸å‡»æˆ˜çš„ç»„ç»‡"
            },
            {
                word: "Selective Service",
                pronunciation: "/sÉªËˆlektÉªv ËˆsÉœËrvÉªs/",
                chinese: "å…µå½¹ç™»è®°",
                definition: "The system that requires men 18-25 to register for potential military draft.",
                example: "Did you register for Selective Service? â€” Yes, I did.",
                tip: "18-26å²ç”·æ€§å±…æ°‘å¿…é¡»ç™»è®°"
            },
            {
                word: "Draft / Drafted",
                pronunciation: "/drÃ¦ft/",
                chinese: "å¾å…µ / è¢«å¾å¬",
                definition: "Required by law to join the military.",
                example: "Did you leave to avoid being drafted? â€” No.",
                tip: "è¢«å¼ºåˆ¶è¦æ±‚å‚å†›"
            },
            {
                word: "Deserted",
                pronunciation: "/dÉªËˆzÉœËrtÉªd/",
                chinese: "é€ƒå…µï¼Œæ“…ç¦»èŒå®ˆ",
                definition: "Left the military without permission.",
                example: "Have you deserted from the military? â€” No.",
                tip: "ä¸ç»å…è®¸ç¦»å¼€å†›é˜Ÿ"
            },
            {
                word: "Court-martialed",
                pronunciation: "/kÉ”Ërt ËˆmÉ‘ËrÊƒld/",
                chinese: "å†›äº‹æ³•åº­å®¡åˆ¤",
                definition: "Tried in a military court for breaking military rules.",
                example: "Have you been court-martialed? â€” No.",
                tip: "åœ¨å†›äº‹æ³•åº­å—å®¡"
            },
            {
                word: "Dishonorable Discharge",
                pronunciation: "/dÉªsËˆÉ‘ËnÉ™rÉ™bl ËˆdÉªstÊƒÉ‘ËrdÊ’/",
                chinese: "ä¸åèª‰é€€ä¼",
                definition: "Being dismissed from the military for serious misconduct.",
                example: "Did you receive a dishonorable discharge? â€” No.",
                tip: "å› ä¸¥é‡è¿è§„è¢«å¼€é™¤"
            }
        ]
    },

    // æ•ˆå¿ èª“è¯
    oath: {
        title: "æ•ˆå¿ èª“è¯ Oath",
        words: [
            {
                word: "Oath of Allegiance",
                pronunciation: "/oÊŠÎ¸ É™v É™ËˆliËdÊ’É™ns/",
                chinese: "æ•ˆå¿ èª“è¯",
                definition: "The promise new citizens make to be loyal to the United States.",
                example: "Do you understand the Oath of Allegiance? â€” Yes, I do.",
                tip: "å…¥ç±ä»ªå¼ä¸Šè¦å¿µçš„èª“è¯"
            },
            {
                word: "Constitution",
                pronunciation: "/kÉ‘ËnstÉªËˆtuËÊƒn/",
                chinese: "å®ªæ³•",
                definition: "The supreme law of the United States.",
                example: "Do you support the Constitution? â€” Yes, I do.",
                tip: "ç¾å›½æœ€é«˜æ³•å¾‹"
            },
            {
                word: "Bear Arms",
                pronunciation: "/ber É‘Ërmz/",
                chinese: "æºå¸¦æ­¦å™¨å‚æˆ˜",
                definition: "To carry weapons and fight for your country.",
                example: "Are you willing to bear arms? â€” Yes, if the law requires it.",
                tip: "ä¸ºå›½å®¶å‚å†›ä½œæˆ˜"
            },
            {
                word: "Noncombatant Services",
                pronunciation: "/nÉ‘ËnËˆkÉ‘ËmbÉ™tÉ™nt/",
                chinese: "éæˆ˜æ–—æœåŠ¡",
                definition: "Military work that doesn't involve fighting, like medical or office work.",
                example: "Will you perform noncombatant services? â€” Yes.",
                tip: "ä¸ç”¨æ‰“ä»—çš„å†›äº‹å·¥ä½œ"
            },
            {
                word: "Work of National Importance",
                pronunciation: "/wÉœËrk É™v nÃ¦ÊƒÉ™nl ÉªmËˆpÉ”Ërtns/",
                chinese: "å¯¹å›½å®¶æœ‰é‡è¦æ„ä¹‰çš„å·¥ä½œ",
                definition: "Civilian work that helps the country, like driving or cooking for the government.",
                example: "Will you perform work of national importance? â€” Yes.",
                tip: "éå†›äº‹çš„å›½å®¶æœåŠ¡"
            },
            {
                word: "Civilian Direction",
                pronunciation: "/sÉ™ËˆvÉªliÉ™n dÉ™ËˆrekÊƒn/",
                chinese: "æ°‘äº‹æŒ‡æŒ¥",
                definition: "Under the control of non-military authorities.",
                example: "Under civilian direction means not military leadership.",
                tip: "ç”±éå†›äº‹äººå‘˜é¢†å¯¼"
            },
            {
                word: "Renounce",
                pronunciation: "/rÉªËˆnaÊŠns/",
                chinese: "æ”¾å¼ƒï¼Œå®£å¸ƒè„±ç¦»",
                definition: "To formally give up something, like citizenship in another country.",
                example: "I renounce allegiance to any foreign country.",
                tip: "èª“è¯ä¸­è¦æ”¾å¼ƒå¯¹å¤–å›½çš„æ•ˆå¿ "
            },
            {
                word: "Allegiance",
                pronunciation: "/É™ËˆliËdÊ’É™ns/",
                chinese: "æ•ˆå¿ ï¼Œå¿ è¯š",
                definition: "Loyalty to a country or leader.",
                example: "I pledge allegiance to the United States.",
                tip: "å¯¹å›½å®¶çš„å¿ è¯š"
            },
            {
                word: "Hereditary Title / Order of Nobility",
                pronunciation: "/hÉ™ËˆredÉªteri ËˆtaÉªtl/",
                chinese: "ä¸–è¢­å¤´è¡” / è´µæ—çˆµä½",
                definition: "A title of rank (like Prince or Duke) passed down in a family.",
                example: "Do you have a title of nobility? â€” No.",
                tip: "å¦‚ç‹å­ã€å…¬çˆµç­‰å¤´è¡”"
            }
        ]
    },

    // å¸¸ç”¨åŠ¨è¯ä¸çŸ­è¯­
    verbs: {
        title: "å¸¸ç”¨åŠ¨è¯ Common Verbs",
        words: [
            {
                word: "Swear",
                pronunciation: "/swer/",
                chinese: "å®£èª“",
                definition: "To make a serious promise, often in a legal or religious context.",
                example: "Do you swear to tell the truth? â€” Yes, I do.",
                tip: "å‘èª“ã€å®£èª“"
            },
            {
                word: "Claim",
                pronunciation: "/kleÉªm/",
                chinese: "å£°ç§°ï¼Œå®£ç§°",
                definition: "To say something is true.",
                example: "Have you claimed to be a citizen? â€” No.",
                tip: "claim = å£°ç§°"
            },
            {
                word: "Support",
                pronunciation: "/sÉ™ËˆpÉ”Ërt/",
                chinese: "æ”¯æŒï¼ŒæŠšå…»",
                definition: "To help someone financially or to agree with something.",
                example: "Do you support your children? â€” Yes.",
                tip: "ç»æµæ”¯æŒæˆ–è¡¨ç¤ºèµåŒ"
            },
            {
                word: "Commit",
                pronunciation: "/kÉ™ËˆmÉªt/",
                chinese: "çŠ¯ï¼ˆç½ªï¼‰",
                definition: "To do something wrong or illegal.",
                example: "Have you committed any crimes? â€” No.",
                tip: "commit a crime = çŠ¯ç½ª"
            },
            {
                word: "Provide",
                pronunciation: "/prÉ™ËˆvaÉªd/",
                chinese: "æä¾›",
                definition: "To give or supply something.",
                example: "Did you provide false information? â€” No.",
                tip: "provide = ç»™äºˆ"
            },
            {
                word: "Register",
                pronunciation: "/ËˆredÊ’ÉªstÉ™r/",
                chinese: "ç™»è®°ï¼Œæ³¨å†Œ",
                definition: "To officially record your name for something.",
                example: "Did you register for Selective Service? â€” Yes.",
                tip: "æ­£å¼ç™»è®°"
            },
            {
                word: "Enter",
                pronunciation: "/ËˆentÉ™r/",
                chinese: "è¿›å…¥",
                definition: "To go into a place.",
                example: "When did you enter the United States? â€” May 2017.",
                tip: "å…¥å¢ƒ"
            },
            {
                word: "Fail",
                pronunciation: "/feÉªl/",
                chinese: "å¤±è´¥ï¼Œæœªèƒ½",
                definition: "To not do something that was expected.",
                example: "Did you fail to file taxes? â€” No, I always file.",
                tip: "fail to = æœªèƒ½åšåˆ°"
            }
        ]
    }
};

// è·å–æ‰€æœ‰è¯æ±‡ï¼ˆç”¨äºå­¦ä¹ æ¨¡å¼ï¼‰
function getAllVocabulary() {
    const allWords = [];
    for (const category in vocabularyDatabase) {
        allWords.push(...vocabularyDatabase[category].words.map(w => ({
            ...w,
            category: category,
            categoryTitle: vocabularyDatabase[category].title
        })));
    }
    return allWords;
}

// è·å–æŸç±»åˆ«çš„è¯æ±‡
function getVocabularyByCategory(category) {
    return vocabularyDatabase[category]?.words || [];
}
// N-400 Interview Simulator - Main Application
// ä¸»åº”ç”¨ç¨‹åºé€»è¾‘

// ==================== çŠ¶æ€ç®¡ç† ====================
const state = {
    currentModule: null,
    currentQuestions: [],
    currentQuestionIndex: 0,
    settings: {
        difficulty: 'normal',
        showChinese: true,
        autoNext: true,
        randomPhrasing: true,
        filter: 'all'
    },
    progress: {
        practiced: {},
        mastered: {},
        needsPractice: {}
    },
    sessionStats: {
        correct: 0,
        incorrect: 0
    },
    speechSynthesis: null,
    speechRecognition: null,
    isListening: false,
    isSpeaking: false
};

// ==================== åˆå§‹åŒ– ====================
document.addEventListener('DOMContentLoaded', function() {
    initializeApp();
});

function initializeApp() {
    // åŠ è½½ä¿å­˜çš„è¿›åº¦
    loadProgress();

    // åˆå§‹åŒ–è¯­éŸ³åˆæˆ
    initSpeechSynthesis();

    // åˆå§‹åŒ–è¯­éŸ³è¯†åˆ«
    initSpeechRecognition();

    // ç»‘å®šäº‹ä»¶
    bindEvents();

    // æ˜¾ç¤ºé¦–é¡µ
    showHome();
}

// ==================== è¯­éŸ³åˆæˆï¼ˆæ–‡å­—è½¬è¯­éŸ³ï¼‰====================
function initSpeechSynthesis() {
    if ('speechSynthesis' in window) {
        state.speechSynthesis = window.speechSynthesis;

        // ç­‰å¾…voicesåŠ è½½
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = () => {
                getAvailableVoices();
            };
        }

        // ç«‹å³å°è¯•è·å–voices
        setTimeout(getAvailableVoices, 100);
    } else {
        console.warn('Speech synthesis not supported');
    }
}

function getAvailableVoices() {
    const voices = speechSynthesis.getVoices();
    // ä¼˜å…ˆé€‰æ‹©ç¾å¼è‹±è¯­äººå£°
    const preferredVoices = voices.filter(v =>
        v.lang.includes('en-US') || v.lang.includes('en_US')
    );

    if (preferredVoices.length > 0) {
        // å°è¯•æ‰¾ä¸€ä¸ªè‡ªç„¶çš„å£°éŸ³
        state.preferredVoice = preferredVoices.find(v =>
            v.name.includes('Samantha') ||
            v.name.includes('Alex') ||
            v.name.includes('Daniel') ||
            v.name.includes('Karen') ||
            v.name.includes('Google')
        ) || preferredVoices[0];
    }

    return voices;
}

function speak(text, options = {}) {
    return new Promise((resolve, reject) => {
        if (!state.speechSynthesis) {
            reject('Speech synthesis not available');
            return;
        }

        // å–æ¶ˆä¹‹å‰çš„è¯­éŸ³
        state.speechSynthesis.cancel();

        const utterance = new SpeechSynthesisUtterance(text);

        // æ ¹æ®éš¾åº¦è®¾ç½®è¯­é€Ÿ
        const speedMap = {
            easy: 0.8,
            normal: 1.0,
            hard: 1.2
        };

        utterance.rate = options.slow ? 0.7 : speedMap[state.settings.difficulty];
        utterance.pitch = 1.0;
        utterance.volume = 1.0;

        // è®¾ç½®å£°éŸ³
        if (state.preferredVoice) {
            utterance.voice = state.preferredVoice;
        }

        utterance.onstart = () => {
            state.isSpeaking = true;
            document.getElementById('officerAvatar')?.classList.add('active');
        };

        utterance.onend = () => {
            state.isSpeaking = false;
            document.getElementById('officerAvatar')?.classList.remove('active');
            resolve();
        };

        utterance.onerror = (event) => {
            state.isSpeaking = false;
            document.getElementById('officerAvatar')?.classList.remove('active');
            reject(event.error);
        };

        state.speechSynthesis.speak(utterance);
    });
}

function playQuestion() {
    const question = state.currentQuestions[state.currentQuestionIndex];
    if (!question) return;

    const text = state.settings.randomPhrasing
        ? getRandomPhrasing(question, state.settings.difficulty)
        : question.phrasings[0].text;

    // æ›´æ–°æ˜¾ç¤ºçš„é—®é¢˜æ–‡æœ¬
    document.getElementById('questionText').textContent = text;

    speak(text).catch(err => console.error('Speech error:', err));
}

function playQuestionSlow() {
    const question = state.currentQuestions[state.currentQuestionIndex];
    if (!question) return;

    const text = document.getElementById('questionText').textContent;
    speak(text, { slow: true }).catch(err => console.error('Speech error:', err));
}

function speakFeedback(isCorrect) {
    const correctResponses = [
        "Okay.",
        "Good.",
        "Alright.",
        "Thank you.",
        "Okay, next question."
    ];

    const incorrectResponses = [
        "Can you repeat that?",
        "One more time?",
        "I didn't catch that."
    ];

    const responses = isCorrect ? correctResponses : incorrectResponses;
    const response = responses[Math.floor(Math.random() * responses.length)];

    return speak(response);
}

// ==================== è¯­éŸ³è¯†åˆ«ï¼ˆè¯­éŸ³è½¬æ–‡å­—ï¼‰====================
function initSpeechRecognition() {
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    if (SpeechRecognition) {
        state.speechRecognition = new SpeechRecognition();
        state.speechRecognition.continuous = false;
        state.speechRecognition.interimResults = true;
        state.speechRecognition.lang = 'en-US';

        state.speechRecognition.onstart = () => {
            state.isListening = true;
            document.getElementById('micBtn')?.classList.add('listening');
        };

        state.speechRecognition.onend = () => {
            state.isListening = false;
            document.getElementById('micBtn')?.classList.remove('listening');
        };

        state.speechRecognition.onresult = (event) => {
            const transcript = Array.from(event.results)
                .map(result => result[0].transcript)
                .join('');

            document.getElementById('answerInput').value = transcript;
        };

        state.speechRecognition.onerror = (event) => {
            console.error('Speech recognition error:', event.error);
            state.isListening = false;
            document.getElementById('micBtn')?.classList.remove('listening');
        };
    } else {
        console.warn('Speech recognition not supported');
        // éšè—éº¦å…‹é£æŒ‰é’®
        const micBtn = document.getElementById('micBtn');
        if (micBtn) micBtn.style.display = 'none';
    }
}

function toggleMic() {
    if (!state.speechRecognition) {
        alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«åŠŸèƒ½ã€‚è¯·ä½¿ç”¨Chromeæµè§ˆå™¨ã€‚\nSpeech recognition is not supported in your browser. Please use Chrome.');
        return;
    }

    if (state.isListening) {
        state.speechRecognition.stop();
    } else {
        state.speechRecognition.start();
    }
}

// ==================== äº‹ä»¶ç»‘å®š ====================
function bindEvents() {
    // æ¨¡å—å¡ç‰‡ç‚¹å‡»
    document.querySelectorAll('.module-card').forEach(card => {
        card.addEventListener('click', function() {
            const module = this.dataset.module;
            if (module === 'vocabulary') {
                showVocabulary();
            } else {
                startModule(module);
            }
        });
    });

    // è®¾ç½®æŒ‰é’®
    document.querySelectorAll('.setting-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const setting = this.dataset.setting;
            const value = this.dataset.value;

            // æ›´æ–°UI
            this.parentElement.querySelectorAll('.setting-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');

            // æ›´æ–°çŠ¶æ€
            state.settings[setting] = value;
            saveProgress();
        });
    });

    // Toggleå¼€å…³
    document.getElementById('showChinese')?.addEventListener('change', function() {
        state.settings.showChinese = this.checked;
        updateChineseDisplay();
        saveProgress();
    });

    document.getElementById('autoNext')?.addEventListener('change', function() {
        state.settings.autoNext = this.checked;
        saveProgress();
    });

    document.getElementById('randomPhrasing')?.addEventListener('change', function() {
        state.settings.randomPhrasing = this.checked;
        saveProgress();
    });
}

// ==================== ç•Œé¢å¯¼èˆª ====================
function showHome() {
    document.getElementById('homeScreen').style.display = 'block';
    document.getElementById('interviewScreen').style.display = 'none';
    document.getElementById('progressScreen').style.display = 'none';
    document.getElementById('resultsScreen').style.display = 'none';
    const vocabScreen = document.getElementById('vocabularyScreen');
    if (vocabScreen) vocabScreen.style.display = 'none';

    // åœæ­¢è¯­éŸ³
    if (state.speechSynthesis) {
        state.speechSynthesis.cancel();
    }
}

function showProgress() {
    document.getElementById('homeScreen').style.display = 'none';
    document.getElementById('interviewScreen').style.display = 'none';
    document.getElementById('progressScreen').style.display = 'block';
    document.getElementById('resultsScreen').style.display = 'none';

    updateProgressDisplay();
}

function showResults() {
    document.getElementById('homeScreen').style.display = 'none';
    document.getElementById('interviewScreen').style.display = 'none';
    document.getElementById('progressScreen').style.display = 'none';
    document.getElementById('resultsScreen').style.display = 'block';

    const correct = state.sessionStats.correct;
    const incorrect = state.sessionStats.incorrect;
    const total = correct + incorrect;
    const percentage = total > 0 ? Math.round((correct / total) * 100) : 0;

    document.getElementById('correctCount').textContent = correct;
    document.getElementById('incorrectCount').textContent = incorrect;

    // æ ¹æ®æˆç»©æ˜¾ç¤ºä¸åŒçš„å›¾æ ‡å’Œæ¶ˆæ¯
    const resultsIcon = document.getElementById('resultsIcon');
    const resultsTitle = document.getElementById('resultsTitle');
    const resultsSubtitle = document.getElementById('resultsSubtitle');

    if (percentage >= 80) {
        resultsIcon.textContent = 'ğŸ‰';
        resultsTitle.textContent = 'å¤ªæ£’äº†ï¼Excellent!';
        resultsSubtitle.textContent = `ä½ ç­”å¯¹äº† ${percentage}% çš„é—®é¢˜ï¼ç»§ç»­ä¿æŒï¼`;
    } else if (percentage >= 60) {
        resultsIcon.textContent = 'ğŸ‘';
        resultsTitle.textContent = 'åšå¾—ä¸é”™ï¼Good job!';
        resultsSubtitle.textContent = `ä½ ç­”å¯¹äº† ${percentage}% çš„é—®é¢˜ã€‚ç»§ç»­ç»ƒä¹ ä¼šæ›´å¥½ï¼`;
    } else {
        resultsIcon.textContent = 'ğŸ’ª';
        resultsTitle.textContent = 'ç»§ç»­åŠ æ²¹ï¼Keep practicing!';
        resultsSubtitle.textContent = `ä½ ç­”å¯¹äº† ${percentage}% çš„é—®é¢˜ã€‚å¤šç»ƒä¹ å‡ æ¬¡å°±ä¼šè¿›æ­¥ï¼`;
    }
}

// ==================== ç»ƒä¹ æµç¨‹ ====================
function startModule(module) {
    state.currentModule = module;
    let questions = getModuleQuestions(module);

    // åº”ç”¨ç­›é€‰
    questions = getFilteredQuestions(questions);

    if (questions.length === 0) {
        alert('æ²¡æœ‰ç¬¦åˆç­›é€‰æ¡ä»¶çš„é¢˜ç›®ï¼\nNo questions match the filter!');
        return;
    }

    state.currentQuestions = questions;
    state.currentQuestionIndex = 0;
    state.sessionStats = { correct: 0, incorrect: 0 };

    // åˆ‡æ¢ç•Œé¢
    document.getElementById('homeScreen').style.display = 'none';
    document.getElementById('interviewScreen').style.display = 'block';

    // æ›´æ–°æ¨¡å—æ ‡é¢˜
    const info = moduleInfo[module];
    document.getElementById('moduleTitle').textContent = info.title;

    // æ˜¾ç¤ºç¬¬ä¸€ä¸ªé—®é¢˜
    showQuestion();
}

function showQuestion() {
    const question = state.currentQuestions[state.currentQuestionIndex];
    if (!question) {
        showResults();
        return;
    }

    // æ›´æ–°è¿”å›æŒ‰é’®çŠ¶æ€
    updateBackButton();

    // æ›´æ–°è¿›åº¦æ¡
    const progress = ((state.currentQuestionIndex + 1) / state.currentQuestions.length) * 100;
    document.getElementById('progressFill').style.width = `${progress}%`;
    document.getElementById('questionCount').textContent =
        `${state.currentQuestionIndex + 1} / ${state.currentQuestions.length}`;

    // è·å–é—®é¢˜æ–‡æœ¬
    const questionText = state.settings.randomPhrasing
        ? getRandomPhrasing(question, state.settings.difficulty)
        : question.phrasings[0].text;

    // æ˜¾ç¤ºé—®é¢˜
    document.getElementById('questionText').textContent = questionText;
    document.getElementById('questionChinese').textContent = question.chinese;

    // æ›´æ–°ä¸­æ–‡æ˜¾ç¤º
    updateChineseDisplay();

    // é‡ç½®ç­”æ¡ˆåŒºåŸŸ
    document.getElementById('answerInput').value = '';
    document.getElementById('answerArea').style.display = 'block';
    document.getElementById('feedbackArea').classList.remove('visible');

    // è‡ªåŠ¨æ’­æ”¾é—®é¢˜
    setTimeout(() => {
        playQuestion();
    }, 500);
}

function updateChineseDisplay() {
    const chineseEl = document.getElementById('questionChinese');
    if (chineseEl) {
        if (state.settings.showChinese) {
            chineseEl.classList.add('visible');
        } else {
            chineseEl.classList.remove('visible');
        }
    }
}

function submitAnswer() {
    const question = state.currentQuestions[state.currentQuestionIndex];
    const userAnswer = document.getElementById('answerInput').value.trim();

    if (!userAnswer) {
        // å¦‚æœæ²¡æœ‰è¾“å…¥ï¼Œæç¤ºç”¨æˆ·
        document.getElementById('answerInput').placeholder = 'è¯·è¾“å…¥å›ç­” Please type your answer...';
        document.getElementById('answerInput').focus();
        return;
    }

    // ç®€å•çš„ç­”æ¡ˆæ£€æŸ¥ï¼ˆä¸»è¦æ£€æŸ¥å…³é”®è¯ï¼‰
    const isCorrect = checkAnswer(userAnswer, question);

    // è®°å½•åˆ°ç»ƒä¹ è®°å½•
    if (!state.progress.practiced[question.id]) {
        state.progress.practiced[question.id] = 0;
    }
    state.progress.practiced[question.id]++;

    // æ›´æ–°ç»Ÿè®¡
    if (isCorrect) {
        state.sessionStats.correct++;
    } else {
        state.sessionStats.incorrect++;
    }

    // æ˜¾ç¤ºåé¦ˆ
    showFeedback(question, isCorrect);
}

function checkAnswer(userAnswer, question) {
    const answer = userAnswer.toLowerCase();

    // æ£€æŸ¥æ˜¯å¦åŒ…å«æ­£ç¡®ç­”æ¡ˆçš„å…³é”®è¯
    const correctAnswers = question.answers.map(a => a.toLowerCase());

    // ç®€å•åŒ¹é…ï¼šå›ç­”åŒ…å« yes/no æˆ–å…³é”®è¯
    for (const correct of correctAnswers) {
        // å®Œå…¨åŒ¹é…
        if (answer === correct) return true;

        // Yes/No é—®é¢˜
        if (correct.includes('yes') && answer.includes('yes')) return true;
        if (correct.includes('no') && answer.includes('no') && !answer.includes('yes')) return true;

        // å…³é”®è¯åŒ¹é…
        if (question.keywords) {
            const hasKeyword = question.keywords.some(kw =>
                answer.includes(kw.toLowerCase())
            );
            if (hasKeyword) return true;
        }
    }

    return false;
}

function showFeedback(question, isCorrect) {
    // éšè—ç­”æ¡ˆè¾“å…¥åŒº
    document.getElementById('answerArea').style.display = 'none';

    // æ˜¾ç¤ºåé¦ˆåŒº
    const feedbackArea = document.getElementById('feedbackArea');
    feedbackArea.classList.add('visible');

    const feedbackCard = document.getElementById('feedbackCard');
    const feedbackIcon = document.getElementById('feedbackIcon');
    const feedbackTitle = document.getElementById('feedbackTitle');
    const referenceAnswer = document.getElementById('referenceAnswer');
    const tipText = document.getElementById('tipText');
    const tipsBox = document.getElementById('tipsBox');

    if (isCorrect) {
        feedbackCard.className = 'feedback-card correct';
        feedbackIcon.textContent = 'âœ“';
        feedbackTitle.textContent = 'Good! æ­£ç¡®ï¼';
    } else {
        feedbackCard.className = 'feedback-card incorrect';
        feedbackIcon.textContent = 'âœ—';
        feedbackTitle.textContent = 'Review this å¤ä¹ ä¸€ä¸‹';
    }

    // æ˜¾ç¤ºå‚è€ƒç­”æ¡ˆ
    referenceAnswer.innerHTML = `
        ${question.answers[0]}
        <button class="mini-audio-btn" onclick="speakText('${question.answers[0].replace(/'/g, "\\'")}')">ğŸ”Š</button>
    `;

    // æ˜¾ç¤ºæç¤º
    if (question.tip) {
        tipsBox.style.display = 'block';
        tipText.textContent = question.tip;
    } else {
        tipsBox.style.display = 'none';
    }

    // æ’­æ”¾è¯­éŸ³åé¦ˆï¼Œç„¶åæœ—è¯»å‚è€ƒç­”æ¡ˆ
    speakFeedback(isCorrect).then(() => {
        // åé¦ˆåç¨ç­‰ä¸€ä¸‹å†è¯»ç­”æ¡ˆ
        setTimeout(() => {
            speak(question.answers[0]);
        }, 300);
    }).catch(err => console.log('Feedback speech error:', err));
}

function markMastery(level) {
    const question = state.currentQuestions[state.currentQuestionIndex];

    // ä»å…¶ä»–çº§åˆ«ç§»é™¤
    delete state.progress.mastered[question.id];
    delete state.progress.needsPractice[question.id];

    // æ·»åŠ åˆ°ç›¸åº”çº§åˆ«
    if (level === 'mastered') {
        state.progress.mastered[question.id] = true;
    } else if (level === 'needs-practice') {
        state.progress.needsPractice[question.id] = true;
    }

    // ä¿å­˜è¿›åº¦
    saveProgress();

    // è¿›å…¥ä¸‹ä¸€é¢˜
    nextQuestion();
}

function nextQuestion() {
    state.currentQuestionIndex++;

    if (state.currentQuestionIndex >= state.currentQuestions.length) {
        showResults();
    } else {
        showQuestion();
    }
}

function exitInterview() {
    if (confirm('ç¡®å®šè¦é€€å‡ºç»ƒä¹ å—ï¼Ÿ\nAre you sure you want to exit?')) {
        // åœæ­¢è¯­éŸ³
        if (state.speechSynthesis) {
            state.speechSynthesis.cancel();
        }
        showHome();
    }
}

// ==================== è¿›åº¦ç®¡ç† ====================
function saveProgress() {
    const data = {
        settings: state.settings,
        progress: state.progress
    };
    localStorage.setItem('n400_progress', JSON.stringify(data));
}

function loadProgress() {
    const saved = localStorage.getItem('n400_progress');
    if (saved) {
        try {
            const data = JSON.parse(saved);
            state.settings = { ...state.settings, ...data.settings };
            state.progress = { ...state.progress, ...data.progress };

            // æ›´æ–°UI
            updateSettingsUI();
        } catch (e) {
            console.error('Failed to load progress:', e);
        }
    }
}

function updateSettingsUI() {
    // æ›´æ–°éš¾åº¦æŒ‰é’®
    document.querySelectorAll('[data-setting="difficulty"]').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.value === state.settings.difficulty);
    });

    // æ›´æ–°toggles
    const showChineseEl = document.getElementById('showChinese');
    if (showChineseEl) showChineseEl.checked = state.settings.showChinese;

    const autoNextEl = document.getElementById('autoNext');
    if (autoNextEl) autoNextEl.checked = state.settings.autoNext;

    const randomPhrasingEl = document.getElementById('randomPhrasing');
    if (randomPhrasingEl) randomPhrasingEl.checked = state.settings.randomPhrasing;
}

function updateProgressDisplay() {
    // è®¡ç®—æ€»ä½“ç»Ÿè®¡
    const practiced = Object.keys(state.progress.practiced).length;
    const mastered = Object.keys(state.progress.mastered).length;
    const needsPractice = Object.keys(state.progress.needsPractice).length;

    document.getElementById('totalPracticed').textContent = practiced;
    document.getElementById('totalMastered').textContent = mastered;
    document.getElementById('totalNeedsPractice').textContent = needsPractice;

    // è®¡ç®—å„ç±»åˆ«è¿›åº¦
    const categoryProgress = document.getElementById('categoryProgress');
    categoryProgress.innerHTML = '';

    const categories = ['warmup', 'part2', 'part3-9', 'part12', 'oath'];

    categories.forEach(cat => {
        const questions = questionDatabase[cat] || [];
        const total = questions.length;
        const masteredCount = questions.filter(q => state.progress.mastered[q.id]).length;
        const percentage = total > 0 ? Math.round((masteredCount / total) * 100) : 0;

        const item = document.createElement('div');
        item.className = 'category-item';
        item.innerHTML = `
            <span class="category-name">${moduleInfo[cat].title}</span>
            <div class="category-bar">
                <div class="category-fill" style="width: ${percentage}%"></div>
            </div>
            <span class="category-percent">${masteredCount}/${total}</span>
        `;
        categoryProgress.appendChild(item);
    });
}

// ==================== å·¥å…·å‡½æ•° ====================
function shuffleArray(array) {
    const shuffled = [...array];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
}

// é”®ç›˜å¿«æ·é”®
document.addEventListener('keydown', function(e) {
    // ç©ºæ ¼é”®æ’­æ”¾é—®é¢˜
    if (e.code === 'Space' && document.activeElement.tagName !== 'INPUT') {
        e.preventDefault();
        playQuestion();
    }

    // Ré”®é‡å¤æ’­æ”¾
    if (e.code === 'KeyR' && document.activeElement.tagName !== 'INPUT') {
        e.preventDefault();
        playQuestion();
    }

    // Sé”®æ…¢é€Ÿæ’­æ”¾
    if (e.code === 'KeyS' && document.activeElement.tagName !== 'INPUT') {
        e.preventDefault();
        playQuestionSlow();
    }
});

// ==================== è¯æ±‡å­¦ä¹ åŠŸèƒ½ ====================
let currentVocabCategory = 'all';
let currentVocabList = [];

function showVocabulary() {
    document.getElementById('homeScreen').style.display = 'none';
    document.getElementById('interviewScreen').style.display = 'none';
    document.getElementById('progressScreen').style.display = 'none';
    document.getElementById('resultsScreen').style.display = 'none';
    document.getElementById('vocabularyScreen').style.display = 'block';

    // åŠ è½½è¯æ±‡
    selectVocabCategory('all');
}

function selectVocabCategory(category) {
    currentVocabCategory = category;

    // æ›´æ–°æŒ‰é’®çŠ¶æ€
    document.querySelectorAll('.vocab-category-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.category === category);
    });

    // æ¸…ç©ºæœç´¢
    document.getElementById('vocabSearch').value = '';

    // åŠ è½½è¯æ±‡
    loadVocabulary();
}

function loadVocabulary() {
    if (currentVocabCategory === 'all') {
        currentVocabList = getAllVocabulary();
    } else {
        const categoryData = vocabularyDatabase[currentVocabCategory];
        if (categoryData) {
            currentVocabList = categoryData.words.map(w => ({
                ...w,
                category: currentVocabCategory,
                categoryTitle: categoryData.title
            }));
        } else {
            currentVocabList = [];
        }
    }

    renderVocabulary(currentVocabList);
}

function filterVocabulary() {
    const searchTerm = document.getElementById('vocabSearch').value.toLowerCase().trim();

    if (!searchTerm) {
        renderVocabulary(currentVocabList);
        return;
    }

    const filtered = currentVocabList.filter(word =>
        word.word.toLowerCase().includes(searchTerm) ||
        word.chinese.includes(searchTerm) ||
        word.definition.toLowerCase().includes(searchTerm) ||
        (word.tip && word.tip.includes(searchTerm))
    );

    renderVocabulary(filtered);
}

function renderVocabulary(words) {
    const container = document.getElementById('vocabList');
    const countEl = document.getElementById('vocabCount');

    countEl.textContent = `æ˜¾ç¤º ${words.length} ä¸ªè¯æ±‡ Showing ${words.length} words`;

    if (words.length === 0) {
        container.innerHTML = `
            <div style="text-align: center; padding: 40px; color: var(--gray-500);">
                <p style="font-size: 2rem; margin-bottom: 12px;">ğŸ”</p>
                <p>æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„è¯æ±‡</p>
                <p>No matching vocabulary found</p>
            </div>
        `;
        return;
    }

    container.innerHTML = words.map(word => `
        <div class="vocab-card">
            <div class="vocab-card-header">
                <div>
                    <div class="vocab-word">${word.word}</div>
                    <div class="vocab-pronunciation">${word.pronunciation || ''}</div>
                </div>
                <button class="vocab-audio-btn" onclick="speakText('${word.word.replace(/'/g, "\\'")}')">
                    ğŸ”Š
                </button>
            </div>
            <div class="vocab-chinese">${word.chinese}</div>
            <div class="vocab-definition">
                <span>${word.definition}</span>
                <button class="mini-audio-btn" onclick="speakText(\`${word.definition.replace(/`/g, "'").replace(/'/g, "\\'")}\`)">ğŸ”Š</button>
            </div>
            <div class="vocab-example">
                <span><strong>ä¾‹å¥:</strong> ${word.example}</span>
                <button class="mini-audio-btn" onclick="speakText(\`${word.example.replace(/`/g, "'").replace(/'/g, "\\'")}\`)">ğŸ”Š</button>
            </div>
            ${word.tip ? `
                <div class="vocab-tip">
                    ğŸ’¡ <span>${word.tip}</span>
                </div>
            ` : ''}
        </div>
    `).join('');
}

function toggleVocabCard(card) {
    // å¯ä»¥æ·»åŠ å±•å¼€/æ”¶èµ·æ•ˆæœ
    card.classList.toggle('expanded');
}

function speakWord(word) {
    speakText(word);
}

// é€šç”¨æœ—è¯»å‡½æ•°
function speakText(text) {
    if (state.speechSynthesis) {
        state.speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.rate = 0.9;
        if (state.preferredVoice) {
            utterance.voice = state.preferredVoice;
        }
        state.speechSynthesis.speak(utterance);
    }
}

// è·³è¿‡å½“å‰é—®é¢˜ - ç›´æ¥è¿›å…¥ä¸‹ä¸€é¢˜
function skipQuestion() {
    nextQuestion();
}

// ==================== è¯­éŸ³é€‰æ‹©åŠŸèƒ½ ====================
function populateVoiceList() {
    const voiceSelect = document.getElementById('voiceSelect');
    if (!voiceSelect) return;

    const voices = speechSynthesis.getVoices();
    const englishVoices = voices.filter(v => v.lang.startsWith('en'));

    voiceSelect.innerHTML = '';

    if (englishVoices.length === 0) {
        voiceSelect.innerHTML = '<option value="">æ— å¯ç”¨è¯­éŸ³</option>';
        return;
    }

    englishVoices.forEach((voice, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = `${voice.name} (${voice.lang})`;
        if (state.preferredVoice && voice.name === state.preferredVoice.name) {
            option.selected = true;
        }
        voiceSelect.appendChild(option);
    });

    // å­˜å‚¨è‹±è¯­è¯­éŸ³åˆ—è¡¨ä¾›åç»­ä½¿ç”¨
    state.englishVoices = englishVoices;
}

function changeVoice() {
    const voiceSelect = document.getElementById('voiceSelect');
    const selectedIndex = voiceSelect.value;

    if (state.englishVoices && state.englishVoices[selectedIndex]) {
        state.preferredVoice = state.englishVoices[selectedIndex];
        // è¯•å¬æ–°è¯­éŸ³
        speak("Hello, this is the selected voice.");
    }
}

// é¡µé¢åŠ è½½åå¡«å……è¯­éŸ³åˆ—è¡¨
if (typeof speechSynthesis !== 'undefined') {
    speechSynthesis.onvoiceschanged = populateVoiceList;
    setTimeout(populateVoiceList, 500);
}

// ==================== é€€å›ä¸Šä¸€é¢˜åŠŸèƒ½ ====================
function goBack() {
    if (state.currentQuestionIndex > 0) {
        state.currentQuestionIndex--;
        showQuestion();
    }
}

function updateBackButton() {
    const backBtn = document.getElementById('backBtn');
    if (backBtn) {
        backBtn.disabled = state.currentQuestionIndex === 0;
    }
}

// ==================== é¢˜ç›®ç­›é€‰åŠŸèƒ½ ====================
function getFilteredQuestions(questions) {
    const filter = state.settings.filter || 'all';

    if (filter === 'all') {
        return questions;
    } else if (filter === 'needs-practice') {
        return questions.filter(q => state.progress.needsPractice[q.id]);
    } else if (filter === 'not-mastered') {
        return questions.filter(q => !state.progress.mastered[q.id]);
    }

    return questions;
}

// ==================== æœ—è¯»å…¨éƒ¨è¯æ±‡åŠŸèƒ½ ====================
let isReadingAll = false;
let readingIndex = 0;

function toggleReadAll() {
    if (isReadingAll) {
        stopReadAll();
    } else {
        startReadAll();
    }
}

function startReadAll() {
    if (currentVocabList.length === 0) return;

    isReadingAll = true;
    readingIndex = 0;

    const btn = document.getElementById('readAllBtn');
    const text = document.getElementById('readAllText');
    if (btn) btn.classList.add('playing');
    if (text) text.textContent = 'åœæ­¢æœ—è¯»';

    readNextWord();
}

function stopReadAll() {
    isReadingAll = false;
    if (state.speechSynthesis) {
        state.speechSynthesis.cancel();
    }

    const btn = document.getElementById('readAllBtn');
    const text = document.getElementById('readAllText');
    if (btn) btn.classList.remove('playing');
    if (text) text.textContent = 'æœ—è¯»å…¨éƒ¨';
}

function readNextWord() {
    if (!isReadingAll || readingIndex >= currentVocabList.length) {
        stopReadAll();
        return;
    }

    const word = currentVocabList[readingIndex];

    // é«˜äº®å½“å‰è¯æ±‡å¡ç‰‡
    const cards = document.querySelectorAll('.vocab-card');
    cards.forEach((card, i) => {
        card.style.border = i === readingIndex ? '2px solid var(--primary)' : '2px solid transparent';
    });

    // æ»šåŠ¨åˆ°å½“å‰å¡ç‰‡
    if (cards[readingIndex]) {
        cards[readingIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    // æœ—è¯»ï¼šå•è¯ + å®šä¹‰
    const textToRead = `${word.word}. ${word.definition}`;

    if (state.speechSynthesis) {
        state.speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(textToRead);
        utterance.rate = 0.85;
        if (state.preferredVoice) {
            utterance.voice = state.preferredVoice;
        }

        utterance.onend = () => {
            readingIndex++;
            if (isReadingAll) {
                setTimeout(readNextWord, 500); // é—´éš”0.5ç§’è¯»ä¸‹ä¸€ä¸ª
            }
        };

        utterance.onerror = () => {
            readingIndex++;
            if (isReadingAll) {
                setTimeout(readNextWord, 500);
            }
        };

        state.speechSynthesis.speak(utterance);
    }
}
</script>
</body>
</html>
